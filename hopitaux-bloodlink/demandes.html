<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BloodLink H√¥pitaux - Demandes</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/hospital.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>
<body class="hospital-platform">
    <!-- Header Hospitalier -->
    <header class="hospital-header">
        <div class="header-container">
            <div class="hospital-brand">
                <div class="brand-logo">üè•</div>
                <div class="brand-info">
                    <h1>BloodLink H√¥pitaux</h1>
                    <span class="hospital-name" id="currentHospital">H√¥pital Abass Ndao</span>
                </div>
            </div>
            
            <div class="header-actions">
                <div class="quick-actions">
                    <button class="btn btn-emergency" onclick="declareQuickEmergency()">
                        üö® Urgence Sanguine
                    </button>
                    <button class="btn btn-primary" onclick="openStockManagement()">
                        ü©∏ G√©rer le Stock
                    </button>
                </div>
                
                <div class="user-menu">
                    <div class="notification-bell" id="notificationBell">
                        <span class="notification-count">3</span>
                        üîî
                    </div>
                    <div class="hospital-profile">
                        <span class="profile-name">Dr. Ciss√©</span>
                        <span class="profile-role">Responsable H√©matologie</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation Principale -->
    <nav class="hospital-nav">
        <div class="nav-container">
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="index.html" class="nav-link">
                        <span class="nav-icon">üìä</span>
                        Tableau de Bord
                    </a>
                </li>
                <li class="nav-item">
                    <a href="urgences.html" class="nav-link">
                        <span class="nav-icon">üö®</span>
                        Urgences
                        <span class="nav-badge" id="urgentBadge">2</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="stocks.html" class="nav-link">
                        <span class="nav-icon">ü©∏</span>
                        Stocks Sanguins
                        <span class="nav-badge critical">CRITIQUE</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="reservations.html" class="nav-link">
                        <span class="nav-icon">üì¶</span>
                        R√©servations
                        <span class="nav-badge" id="reservationBadge">5</span>
                    </a>
                </li>
                <li class="nav-item active">
                    <a href="demandes.html" class="nav-link">
                        <span class="nav-icon">üìã</span>
                        Demandes
                        <span class="nav-badge" id="demandBadge">8</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="profil.html" class="nav-link">
                        <span class="nav-icon">‚öôÔ∏è</span>
                        Profil H√¥pital
                    </a>
                </li>
            </ul>
            
            <div class="nav-footer">
                <div class="hospital-status">
                    <span class="status-indicator online"></span>
                    Connect√© au r√©seau BloodLink
                </div>
            </div>
        </div>
    </nav>

    <!-- Contenu Principal -->
    <main class="hospital-main">
        <div class="main-container">
            <!-- En-t√™te de Page -->
            <div class="page-header">
                <div class="header-content">
                    <h1>Gestion des Demandes</h1>
                    <p>Suivez et g√©rez toutes les demandes de produits sanguins internes</p>
                </div>
                <div class="header-actions">
                    <button class="btn btn-primary" onclick="demandesPage.openNewDemandModal()">
                        üìã Nouvelle Demande
                    </button>
                </div>
            </div>

            <!-- Statistiques Rapides -->
            <section class="demand-stats">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon pending">‚è≥</div>
                        <div class="stat-content">
                            <h3>En Attente</h3>
                            <div class="stat-value" id="pendingDemandsCount">8</div>
                            <div class="stat-trend negative">+3 aujourd'hui</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon approved">‚úÖ</div>
                        <div class="stat-content">
                            <h3>Approuv√©es</h3>
                            <div class="stat-value" id="approvedDemandsCount">15</div>
                            <div class="stat-trend positive">+5 cette semaine</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon rejected">‚ùå</div>
                        <div class="stat-content">
                            <h3>Rejet√©es</h3>
                            <div class="stat-value" id="rejectedDemandsCount">2</div>
                            <div class="stat-trend">-1 ce mois</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon completed">üì¶</div>
                        <div class="stat-content">
                            <h3>Trait√©es</h3>
                            <div class="stat-value" id="completedDemandsCount">42</div>
                            <div class="stat-trend positive">+12 ce mois</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Filtres et Recherche -->
            <section class="filters-section">
                <div class="filters-container">
                    <div class="search-box">
                        <input type="text" id="demandSearch" placeholder="Rechercher une demande...">
                        <span class="search-icon">üîç</span>
                    </div>
                    
                    <div class="filter-group">
                        <select id="statusFilter">
                            <option value="all">Tous les statuts</option>
                            <option value="pending">En attente</option>
                            <option value="approved">Approuv√©e</option>
                            <option value="rejected">Rejet√©e</option>
                            <option value="completed">Termin√©e</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <select id="departmentFilter">
                            <option value="all">Tous services</option>
                            <option value="urgence">Urgences</option>
                            <option value="chirurgie">Chirurgie</option>
                            <option value="cardiologie">Cardiologie</option>
                            <option value="maternite">Maternit√©</option>
                            <option value="oncologie">Oncologie</option>
                            <option value="pediatrie">P√©diatrie</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <select id="priorityFilter">
                            <option value="all">Toutes priorit√©s</option>
                            <option value="low">Basse</option>
                            <option value="medium">Moyenne</option>
                            <option value="high">Haute</option>
                            <option value="critical">Critique</option>
                        </select>
                    </div>
                    
                    <button class="btn btn-outline" onclick="demandesPage.applyFilters()">
                        Appliquer
                    </button>
                </div>
            </section>

            <!-- Liste des Demandes -->
            <section class="demands-list">
                <div class="section-header">
                    <h2>Demandes R√©centes</h2>
                    <div class="view-options">
                        <button class="btn btn-sm" onclick="demandesPage.exportDemands()">
                            üìÑ Exporter
                        </button>
                    </div>
                </div>
                
                <div class="demands-container" id="demandsContainer">
                    <!-- Les demandes seront charg√©es dynamiquement ici -->
                </div>
            </section>

            <!-- Demandes Prioritaires -->
            <section class="priority-demands">
                <div class="section-header">
                    <h2>Demandes Prioritaires</h2>
                    <span class="section-badge critical">‚ö†Ô∏è Attention</span>
                </div>
                
                <div class="priority-list" id="priorityDemands">
                    <!-- Les demandes prioritaires seront charg√©es ici -->
                </div>
            </section>
        </div>
    </main>

    <!-- Modal Nouvelle Demande -->
    <div class="modal-overlay" id="demandModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üìã Nouvelle Demande</h3>
                <button class="modal-close" onclick="demandesPage.closeDemandModal()">√ó</button>
            </div>
            <div class="modal-body">
                <form id="demandForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Produit Sanguin Requis *</label>
                            <select id="demandBloodType" required>
                                <option value="">S√©lectionnez un produit</option>
                                <option value="O-">O- (Donneur universel)</option>
                                <option value="O+">O+</option>
                                <option value="A-">A-</option>
                                <option value="A+">A+</option>
                                <option value="B-">B-</option>
                                <option value="B+">B+</option>
                                <option value="AB-">AB-</option>
                                <option value="AB+">AB+ (Receveur universel)</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>Quantit√© *</label>
                            <input type="number" id="demandQuantity" min="1" max="20" value="2" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>Service Demandeur *</label>
                            <select id="demandDepartment" required>
                                <option value="">S√©lectionnez un service</option>
                                <option value="urgence">Urgences</option>
                                <option value="chirurgie">Chirurgie</option>
                                <option value="cardiologie">Cardiologie</option>
                                <option value="maternite">Maternit√©</option>
                                <option value="oncologie">Oncologie</option>
                                <option value="pediatrie">P√©diatrie</option>
                                <option value="autres">Autre service</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>Priorit√© *</label>
                            <select id="demandPriority" required>
                                <option value="low">Basse</option>
                                <option value="medium" selected>Moyenne</option>
                                <option value="high">Haute</option>
                                <option value="critical">Critique</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Nom du Patient</label>
                        <input type="text" id="demandPatient" placeholder="Nom du patient (optionnel)">
                    </div>
                    
                    <div class="form-group">
                        <label>Motif de la Demande *</label>
                        <textarea id="demandReason" placeholder="D√©crivez le motif de la demande (intervention, transfusion, etc.)" rows="3" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>Date de besoin</label>
                        <input type="date" id="demandDate" min="">
                    </div>
                    
                    <div class="form-group">
                        <label>M√©decin Prescripteur *</label>
                        <input type="text" id="demandDoctor" placeholder="Nom du m√©decin prescripteur" required>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="btn btn-outline" onclick="demandesPage.closeDemandModal()">
                            Annuler
                        </button>
                        <button type="submit" class="btn btn-primary">
                            üìã Soumettre la demande
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal D√©tails Demande -->
    <div class="modal-overlay" id="demandDetailModal">
        <div class="modal-content large">
            <div class="modal-header">
                <h3>üìã D√©tails de la Demande</h3>
                <button class="modal-close" onclick="demandesPage.closeDemandDetail()">√ó</button>
            </div>
            <div class="modal-body">
                <div id="demandDetailContent">
                    <!-- Contenu charg√© dynamiquement -->
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Validation Demande -->
    <div class="modal-overlay" id="validationModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>‚úÖ Validation de Demande</h3>
                <button class="modal-close" onclick="demandesPage.closeValidationModal()">√ó</button>
            </div>
            <div class="modal-body">
                <div id="validationContent">
                    <!-- Contenu charg√© dynamiquement -->
                </div>
            </div>
        </div>
    </div>

    <script src="js/app.js"></script>
    <script src="js/hospital-core.js"></script>
    <script src="js/demandes-page.js"></script>
</body>

</html>
