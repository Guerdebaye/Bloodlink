<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BloodLink H√¥pitaux - R√©servations</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/hospital.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>
<body class="hospital-platform">
    <!-- Header Hospitalier -->
    <header class="hospital-header">
        <div class="header-container">
            <div class="hospital-brand">
                <div class="brand-logo">üè•</div>
                <div class="brand-info">
                    <h1>BloodLink H√¥pitaux</h1>
                    <span class="hospital-name" id="currentHospital">H√¥pital Central Paris</span>
                </div>
            </div>
            
            <div class="header-actions">
                <div class="quick-actions">
                    <button class="btn btn-emergency" onclick="declareQuickEmergency()">
                        üö® Urgence Sanguine
                    </button>
                    <button class="btn btn-primary" onclick="openStockManagement()">
                        ü©∏ G√©rer le Stock
                    </button>
                </div>
                
                <div class="user-menu">
                    <div class="notification-bell" id="notificationBell">
                        <span class="notification-count">3</span>
                        üîî
                    </div>
                    <div class="hospital-profile">
                        <span class="profile-name">Dr. Martin</span>
                        <span class="profile-role">Responsable H√©matologie</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation Principale -->
    <nav class="hospital-nav">
        <div class="nav-container">
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="index.html" class="nav-link">
                        <span class="nav-icon">üìä</span>
                        Tableau de Bord
                    </a>
                </li>
                <li class="nav-item">
                    <a href="urgences.html" class="nav-link">
                        <span class="nav-icon">üö®</span>
                        Urgences
                        <span class="nav-badge" id="urgentBadge">2</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="stocks.html" class="nav-link">
                        <span class="nav-icon">ü©∏</span>
                        Stocks Sanguins
                        <span class="nav-badge critical">CRITIQUE</span>
                    </a>
                </li>
                <li class="nav-item active">
                    <a href="reservations.html" class="nav-link">
                        <span class="nav-icon">üì¶</span>
                        R√©servations
                        <span class="nav-badge" id="reservationBadge">5</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="demandes.html" class="nav-link">
                        <span class="nav-icon">üìã</span>
                        Demandes
                    </a>
                </li>
                <li class="nav-item">
                    <a href="profil.html" class="nav-link">
                        <span class="nav-icon">‚öôÔ∏è</span>
                        Profil H√¥pital
                    </a>
                </li>
            </ul>
            
            <div class="nav-footer">
                <div class="hospital-status">
                    <span class="status-indicator online"></span>
                    Connect√© au r√©seau BloodLink
                </div>
            </div>
        </div>
    </nav>

    <!-- Contenu Principal -->
    <main class="hospital-main">
        <div class="main-container">
            <!-- En-t√™te de Page -->
            <div class="page-header">
                <div class="header-content">
                    <h1>Gestion des R√©servations</h1>
                    <p>Suivez et g√©rez toutes vos r√©servations de produits sanguins</p>
                </div>
                <div class="header-actions">
                    <button class="btn btn-primary" onclick="reservationSystem.openReservationModal()">
                        üì¶ Nouvelle R√©servation
                    </button>
                </div>
            </div>

            <!-- Statistiques Rapides -->
            <section class="reservation-stats">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon pending">üìã</div>
                        <div class="stat-content">
                            <h3>En Attente</h3>
                            <div class="stat-value" id="pendingCount">5</div>
                            <div class="stat-trend negative">+2 aujourd'hui</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon confirmed">‚úÖ</div>
                        <div class="stat-content">
                            <h3>Confirm√©es</h3>
                            <div class="stat-value" id="confirmedCount">12</div>
                            <div class="stat-trend positive">+3 cette semaine</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon shipped">üöö</div>
                        <div class="stat-content">
                            <h3>En Transit</h3>
                            <div class="stat-value" id="shippedCount">3</div>
                            <div class="stat-trend">Livraison aujourd'hui</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon delivered">üì¶</div>
                        <div class="stat-content">
                            <h3>Livr√©es</h3>
                            <div class="stat-value" id="deliveredCount">28</div>
                            <div class="stat-trend positive">+8 ce mois</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Filtres et Recherche -->
            <section class="filters-section">
                <div class="filters-container">
                    <div class="search-box">
                        <input type="text" id="reservationSearch" placeholder="Rechercher une r√©servation...">
                        <span class="search-icon">üîç</span>
                    </div>
                    
                    <div class="filter-group">
                        <select id="statusFilter">
                            <option value="all">Tous les statuts</option>
                            <option value="pending">En attente</option>
                            <option value="confirmed">Confirm√©e</option>
                            <option value="shipped">En transit</option>
                            <option value="delivered">Livr√©e</option>
                            <option value="cancelled">Annul√©e</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <select id="bloodTypeFilter">
                            <option value="all">Tous les groupes</option>
                            <option value="O-">O-</option>
                            <option value="O+">O+</option>
                            <option value="A-">A-</option>
                            <option value="A+">A+</option>
                            <option value="B-">B-</option>
                            <option value="B+">B+</option>
                            <option value="AB-">AB-</option>
                            <option value="AB+">AB+</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <select id="urgencyFilter">
                            <option value="all">Toutes urgences</option>
                            <option value="normal">Normale</option>
                            <option value="urgent">Urgente</option>
                            <option value="critical">Critique</option>
                        </select>
                    </div>
                    
                    <button class="btn btn-outline" onclick="applyFilters()">
                        Appliquer
                    </button>
                </div>
            </section>

            <!-- Liste des R√©servations -->
            <section class="reservations-list">
                <div class="section-header">
                    <h2>R√©servations R√©centes</h2>
                    <div class="view-options">
                        <button class="btn btn-sm" onclick="exportReservations()">
                            üìÑ Exporter
                        </button>
                    </div>
                </div>
                
                <div class="reservations-container" id="reservationsContainer">
                    <!-- Les r√©servations seront charg√©es dynamiquement ici -->
                </div>
            </section>

            <!-- R√©servations en Retard -->
            <section class="delayed-reservations">
                <div class="section-header">
                    <h2>R√©servations en Retard</h2>
                    <span class="section-badge critical">‚ö†Ô∏è Attention</span>
                </div>
                
                <div class="delayed-list" id="delayedReservations">
                    <!-- Les r√©servations en retard seront charg√©es ici -->
                </div>
            </section>
        </div>
    </main>

    <!-- Modal Nouvelle R√©servation -->
    <div class="modal-overlay" id="reservationModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üì¶ Nouvelle R√©servation</h3>
                <button class="modal-close" onclick="reservationSystem.closeReservationModal()">√ó</button>
            </div>
            <div class="modal-body">
                <form id="reservationForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Produit Sanguin *</label>
                            <select id="reservationBloodType" required>
                                <option value="">S√©lectionnez un produit</option>
                                <option value="O-">O- (Donneur universel)</option>
                                <option value="O+">O+</option>
                                <option value="A-">A-</option>
                                <option value="A+">A+</option>
                                <option value="B-">B-</option>
                                <option value="B+">B+</option>
                                <option value="AB-">AB-</option>
                                <option value="AB+">AB+ (Receveur universel)</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>Quantit√© *</label>
                            <input type="number" id="reservationQuantity" min="1" max="50" value="2" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Urgence de la demande</label>
                        <select id="reservationUrgency">
                            <option value="normal">Normale (48h)</option>
                            <option value="urgent">Urgente (24h)</option>
                            <option value="critical">Critique (4h)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Service demandeur *</label>
                        <input type="text" id="reservationService" placeholder="Ex: Chirurgie Cardiaque" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Motif de la demande</label>
                        <textarea id="reservationReason" placeholder="Chirurgie programm√©e, stock s√©curit√©, etc." rows="3"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>Date de besoin</label>
                        <input type="date" id="reservationDate" min="">
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="btn btn-outline" onclick="reservationSystem.closeReservationModal()">
                            Annuler
                        </button>
                        <button type="submit" class="btn btn-primary">
                            üìã Soumettre la r√©servation
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal D√©tails R√©servation -->
    <div class="modal-overlay" id="reservationDetailModal">
        <div class="modal-content large">
            <div class="modal-header">
                <h3>üìã D√©tails de la R√©servation</h3>
                <button class="modal-close" onclick="closeReservationDetail()">√ó</button>
            </div>
            <div class="modal-body">
                <div id="reservationDetailContent">
                    <!-- Contenu charg√© dynamiquement -->
                </div>
            </div>
        </div>
    </div>

    <script src="js/app.js"></script>
    <script src="js/hospital-core.js"></script>
    <script src="js/reservation-system.js"></script>
    <script src="js/reservations-page.js"></script>
</body>
</html>