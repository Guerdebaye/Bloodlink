<!DOCTYPE html>
<html lang="fr" data-bs-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Historique | BloodLink Pro</title>
    
    <!-- CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-blue: #1a73e8;
            --primary-blue-dark: #0d47a1;
            --primary-blue-light: #4285f4;
            --medical-blue: #1976d2;
            --hospital-blue: #1565c0;
            --accent-teal: #00bcd4;
            --accent-green: #4caf50;
            --accent-orange: #ff9800;
            --accent-red: #f44336;
            --accent-purple: #9c27b0;
            --neutral-white: #ffffff;
            --neutral-gray-50: #f8f9fa;
            --neutral-gray-100: #f5f7fa;
            --neutral-gray-200: #e9ecef;
            --neutral-gray-300: #dee2e6;
            --neutral-gray-600: #6c757d;
            --neutral-gray-800: #343a40;
            --gradient-primary: linear-gradient(135deg, var(--primary-blue) 0%, var(--hospital-blue) 100%);
            --gradient-accent: linear-gradient(135deg, var(--accent-teal) 0%, var(--accent-green) 100%);
            --gradient-emergency: linear-gradient(135deg, #ff5252 0%, #ff1744 100%);
            --gradient-success: linear-gradient(135deg, #4caf50 0%, #2e7d32 100%);
            --shadow-sm: 0 2px 8px rgba(25, 118, 210, 0.08);
            --shadow-md: 0 4px 16px rgba(25, 118, 210, 0.12);
            --shadow-lg: 0 8px 32px rgba(25, 118, 210, 0.16);
            --shadow-xl: 0 12px 48px rgba(25, 118, 210, 0.2);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            min-height: 100vh;
            color: var(--neutral-gray-800);
            overflow-x: hidden;
        }
        
        /* ====== HEADER DONNEUR ====== */
        .donor-header {
            background: var(--neutral-white);
            border-bottom: 1px solid var(--neutral-gray-200);
            box-shadow: var(--shadow-sm);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            padding: 0;
            height: 70px;
        }
        
        .header-container {
            max-width: 100%;
            padding: 0 24px;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        /* Logo Donneur */
        .donor-logo {
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
        }
        
        .logo-icon {
            width: 40px;
            height: 40px;
            background: var(--gradient-primary);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }
        
        .logo-icon::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z'/%3E%3C/svg%3E") center no-repeat;
            opacity: 0.9;
        }
        
        .logo-text {
            display: flex;
            flex-direction: column;
        }
        
        .logo-text h1 {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary-blue);
            line-height: 1;
            letter-spacing: -0.5px;
        }
        
        .logo-text span {
            font-size: 0.75rem;
            color: var(--accent-teal);
            font-weight: 600;
            letter-spacing: 1px;
            text-transform: uppercase;
        }
        
        /* Navigation Donneur */
        .donor-nav {
            display: flex;
            gap: 2px;
            margin-left: 32px;
        }
        
        .nav-item {
            padding: 12px 20px;
            text-decoration: none;
            color: var(--neutral-gray-600);
            font-weight: 500;
            font-size: 0.95rem;
            border-radius: 8px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            position: relative;
        }
        
        .nav-item:hover {
            color: var(--primary-blue);
            background: rgba(25, 118, 210, 0.05);
        }
        
        .nav-item.active {
            color: var(--primary-blue);
            background: rgba(25, 118, 210, 0.1);
        }
        
        .nav-item.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 20%;
            right: 20%;
            height: 2px;
            background: var(--primary-blue);
            border-radius: 1px;
        }
        
        /* Zone Actions Droite */
        .header-actions {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        /* Notifications */
        .notification-wrapper {
            position: relative;
        }
        
        .notification-btn {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            border: 1px solid var(--neutral-gray-200);
            background: var(--neutral-white);
            color: var(--neutral-gray-600);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            position: relative;
            cursor: pointer;
        }
        
        .notification-btn:hover {
            background: var(--neutral-gray-50);
            color: var(--primary-blue);
            border-color: var(--primary-blue-light);
        }
        
        .notification-badge {
            position: absolute;
            top: -4px;
            right: -4px;
            background: var(--accent-red);
            color: white;
            font-size: 0.7rem;
            font-weight: 600;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid var(--neutral-white);
        }
        
        /* Profil Donneur */
        .donor-profile {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px 12px;
            border-radius: 12px;
            transition: all 0.3s ease;
            cursor: pointer;
            text-decoration: none;
        }
        
        .donor-profile:hover {
            background: rgba(25, 118, 210, 0.05);
        }
        
        .donor-avatar {
            width: 44px;
            height: 44px;
            border-radius: 12px;
            overflow: hidden;
            border: 2px solid var(--primary-blue-light);
            padding: 2px;
            background: var(--neutral-white);
        }
        
        .donor-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 8px;
        }
        
        .donor-info {
            display: flex;
            flex-direction: column;
        }
        
        .donor-name {
            font-weight: 600;
            color: var(--neutral-gray-800);
            font-size: 0.95rem;
        }
        
        .donor-status {
            font-size: 0.8rem;
            color: var(--accent-teal);
            font-weight: 500;
        }
        
        /* ====== SIDEBAR DONNEUR ====== */
        .donor-sidebar {
            position: fixed;
            left: 0;
            top: 70px;
            bottom: 0;
            width: 280px;
            background: var(--neutral-white);
            border-right: 1px solid var(--neutral-gray-200);
            padding: 24px 0;
            overflow-y: auto;
            z-index: 999;
            box-shadow: var(--shadow-sm);
        }
        
        .sidebar-section {
            padding: 0 20px;
            margin-bottom: 28px;
        }
        
        .sidebar-title {
            font-size: 0.75rem;
            color: var(--neutral-gray-600);
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
            margin-bottom: 16px;
            padding-left: 12px;
        }
        
        .sidebar-nav {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }
        
        .sidebar-link {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            text-decoration: none;
            color: var(--neutral-gray-600);
            border-radius: 8px;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .sidebar-link:hover {
            background: rgba(25, 118, 210, 0.05);
            color: var(--primary-blue);
            transform: translateX(4px);
        }
        
        .sidebar-link.active {
            background: rgba(25, 118, 210, 0.1);
            color: var(--primary-blue);
            font-weight: 500;
        }
        
        .sidebar-link.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 3px;
            height: 60%;
            background: var(--primary-blue);
            border-radius: 0 3px 3px 0;
        }
        
        .nav-icon {
            width: 20px;
            text-align: center;
            font-size: 1.1rem;
        }
        
        .nav-badge {
            margin-left: auto;
            background: var(--accent-teal);
            color: white;
            font-size: 0.7rem;
            padding: 2px 8px;
            border-radius: 10px;
            font-weight: 600;
        }
        
        /* Badge Urgence */
        .emergency-badge {
            background: var(--gradient-emergency);
            color: white;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }
        
        /* Section R√©compenses */
        .rewards-section {
            background: linear-gradient(135deg, rgba(255, 193, 7, 0.1) 0%, rgba(255, 152, 0, 0.1) 100%);
            border: 1px solid rgba(255, 193, 7, 0.2);
            border-radius: 12px;
            padding: 16px;
            margin: 20px;
        }
        
        .reward-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #ffb300 0%, #ff9800 100%);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
            margin-bottom: 12px;
        }
        
        .reward-text {
            font-size: 0.85rem;
            color: var(--neutral-gray-800);
            font-weight: 500;
        }
        
        .reward-subtext {
            font-size: 0.75rem;
            color: var(--neutral-gray-600);
            margin-top: 4px;
        }
        
        /* Overlay Mobile */
        .sidebar-overlay {
            display: none;
            position: fixed;
            top: 70px;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 998;
        }
        
        .sidebar-overlay.active {
            display: block;
        }
        
        /* Bouton Menu Mobile */
        .mobile-menu-btn {
            display: none;
            width: 40px;
            height: 40px;
            border-radius: 10px;
            border: 1px solid var(--neutral-gray-200);
            background: var(--neutral-white);
            color: var(--neutral-gray-600);
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-right: 12px;
        }
        
        .mobile-menu-btn:hover {
            background: var(--neutral-gray-50);
            border-color: var(--primary-blue);
            color: var(--primary-blue);
        }
        
        /* ====== CONTENU PRINCIPAL HISTORIQUE ====== */
        .history-main {
            margin-left: 280px;
            margin-top: 70px;
            padding: 32px;
            min-height: calc(100vh - 70px);
        }
        
        /* En-t√™te de Section */
        .section-header {
            margin-bottom: 32px;
        }
        
        .section-header h1 {
            font-family: 'Montserrat', sans-serif;
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--primary-blue-dark);
            margin-bottom: 8px;
            line-height: 1.2;
        }
        
        .section-subtitle {
            color: var(--neutral-gray-600);
            font-size: 1.1rem;
            max-width: 800px;
        }
        
        /* Statistiques Historique */
        .history-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }
        
        .stat-card {
            background: var(--neutral-white);
            border-radius: 16px;
            padding: 24px;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--neutral-gray-200);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-primary);
        }
        
        .stat-card.success::before {
            background: var(--gradient-success);
        }
        
        .stat-card.warning::before {
            background: linear-gradient(135deg, #ff9800 0%, #ff5722 100%);
        }
        
        .stat-card.info::before {
            background: linear-gradient(135deg, var(--accent-teal) 0%, var(--medical-blue) 100%);
        }
        
        .stat-header {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        
        .stat-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
            background: var(--gradient-primary);
        }
        
        .stat-icon.success {
            background: var(--gradient-success);
        }
        
        .stat-icon.warning {
            background: linear-gradient(135deg, #ff9800 0%, #ff5722 100%);
        }
        
        .stat-icon.info {
            background: linear-gradient(135deg, var(--accent-teal) 0%, var(--medical-blue) 100%);
        }
        
        .stat-trend {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.85rem;
            font-weight: 500;
            padding: 4px 10px;
            border-radius: 20px;
            background: rgba(25, 118, 210, 0.1);
            color: var(--primary-blue);
        }
        
        .trend-up {
            background: rgba(76, 175, 80, 0.1);
            color: var(--accent-green);
        }
        
        .trend-down {
            background: rgba(244, 67, 54, 0.1);
            color: var(--accent-red);
        }
        
        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--neutral-gray-800);
            line-height: 1;
            margin-bottom: 8px;
        }
        
        .stat-label {
            font-size: 0.95rem;
            color: var(--neutral-gray-600);
        }
        
        /* Filtres Historique */
        .history-filters {
            display: flex;
            gap: 12px;
            margin-bottom: 24px;
            flex-wrap: wrap;
            align-items: center;
        }
        
        .filter-btn {
            padding: 10px 20px;
            border-radius: 10px;
            border: 1px solid var(--neutral-gray-300);
            background: var(--neutral-white);
            color: var(--neutral-gray-600);
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .filter-btn:hover {
            background: var(--neutral-gray-100);
            border-color: var(--neutral-gray-400);
        }
        
        .filter-btn.active {
            background: var(--primary-blue);
            color: white;
            border-color: var(--primary-blue);
        }
        
        /* Barre de recherche */
        .search-bar {
            position: relative;
            flex-grow: 1;
            max-width: 300px;
        }
        
        .search-bar input {
            width: 100%;
            padding: 12px 16px 12px 44px;
            border: 1px solid var(--neutral-gray-300);
            border-radius: 10px;
            font-size: 0.95rem;
            transition: all 0.3s ease;
            background: var(--neutral-white);
        }
        
        .search-bar input:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(25, 118, 210, 0.1);
        }
        
        .search-icon {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--neutral-gray-600);
        }
        
        /* Actions Globales */
        .history-actions {
            display: flex;
            gap: 12px;
            margin-bottom: 24px;
        }
        
        .action-btn {
            padding: 12px 20px;
            border-radius: 10px;
            border: 1px solid var(--neutral-gray-300);
            background: var(--neutral-white);
            color: var(--neutral-gray-800);
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .action-btn:hover {
            background: var(--neutral-gray-100);
        }
        
        .action-btn.primary {
            background: var(--primary-blue);
            color: white;
            border-color: var(--primary-blue);
        }
        
        .action-btn.primary:hover {
            background: var(--primary-blue-dark);
        }
        
        .action-btn.success {
            background: var(--accent-green);
            color: white;
            border-color: var(--accent-green);
        }
        
        .action-btn.success:hover {
            background: #388e3c;
        }
        
        /* Tableau Historique */
        .history-table-container {
            background: var(--neutral-white);
            border-radius: 16px;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--neutral-gray-200);
            overflow: hidden;
            margin-bottom: 32px;
        }
        
        .table-header {
            padding: 20px 24px;
            border-bottom: 1px solid var(--neutral-gray-200);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .table-header h3 {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--neutral-gray-800);
            margin: 0;
        }
        
        .table-content {
            overflow-x: auto;
        }
        
        .table {
            width: 100%;
            margin: 0;
            border-collapse: separate;
            border-spacing: 0;
        }
        
        .table th {
            background: var(--neutral-gray-50);
            padding: 16px 24px;
            font-weight: 600;
            color: var(--neutral-gray-800);
            text-transform: uppercase;
            font-size: 0.8rem;
            letter-spacing: 0.5px;
            border-bottom: 1px solid var(--neutral-gray-200);
            text-align: left;
        }
        
        .table td {
            padding: 16px 24px;
            border-bottom: 1px solid var(--neutral-gray-200);
            vertical-align: middle;
        }
        
        .table tr:last-child td {
            border-bottom: none;
        }
        
        .table tr:hover {
            background: rgba(25, 118, 210, 0.02);
        }
        
        /* Badges de statut */
        .status-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            display: inline-block;
        }
        
        .status-completed {
            background: rgba(76, 175, 80, 0.1);
            color: var(--accent-green);
        }
        
        .status-scheduled {
            background: rgba(255, 152, 0, 0.1);
            color: var(--accent-orange);
        }
        
        .status-cancelled {
            background: rgba(244, 67, 54, 0.1);
            color: var(--accent-red);
        }
        
        .status-pending {
            background: rgba(158, 158, 158, 0.1);
            color: #616161;
        }
        
        /* Type sanguin */
        .blood-type-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            border-radius: 8px;
            font-weight: 800;
            font-size: 0.9rem;
            color: white;
            box-shadow: var(--shadow-sm);
        }
        
        .blood-type-o-plus {
            background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);
        }
        
        .blood-type-a-plus {
            background: linear-gradient(135deg, #2196f3 0%, #1976d2 100%);
        }
        
        .blood-type-b-plus {
            background: linear-gradient(135deg, #4caf50 0%, #388e3c 100%);
        }
        
        .blood-type-ab-plus {
            background: linear-gradient(135deg, #9c27b0 0%, #7b1fa2 100%);
        }
        
        /* Actions sur les lignes */
        .row-actions {
            display: flex;
            gap: 8px;
        }
        
        .row-action-btn {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            border: 1px solid var(--neutral-gray-300);
            background: var(--neutral-white);
            color: var(--neutral-gray-600);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .row-action-btn:hover {
            background: var(--neutral-gray-100);
            color: var(--primary-blue);
            border-color: var(--primary-blue-light);
        }
        
        /* Vue Chronologique */
        .timeline-view {
            background: var(--neutral-white);
            border-radius: 16px;
            padding: 24px;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--neutral-gray-200);
            margin-bottom: 32px;
        }
        
        .timeline-header {
            margin-bottom: 24px;
        }
        
        .timeline-header h3 {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--neutral-gray-800);
            margin: 0;
        }
        
        .timeline {
            position: relative;
            padding-left: 30px;
        }
        
        .timeline::before {
            content: '';
            position: absolute;
            left: 15px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--neutral-gray-300);
        }
        
        .timeline-item {
            position: relative;
            margin-bottom: 32px;
            padding-bottom: 32px;
            border-bottom: 1px solid var(--neutral-gray-200);
        }
        
        .timeline-item:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }
        
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -23px;
            top: 0;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--primary-blue);
            border: 2px solid var(--neutral-white);
            box-shadow: var(--shadow-sm);
        }
        
        .timeline-item.completed::before {
            background: var(--accent-green);
        }
        
        .timeline-item.scheduled::before {
            background: var(--accent-orange);
        }
        
        .timeline-item.cancelled::before {
            background: var(--accent-red);
        }
        
        .timeline-date {
            font-size: 0.9rem;
            color: var(--neutral-gray-600);
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .timeline-content {
            background: var(--neutral-gray-50);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
        }
        
        .timeline-title {
            font-weight: 600;
            color: var(--neutral-gray-800);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .timeline-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 12px;
            margin-top: 12px;
        }
        
        .detail-item {
            display: flex;
            flex-direction: column;
        }
        
        .detail-label {
            font-size: 0.8rem;
            color: var(--neutral-gray-600);
            margin-bottom: 4px;
        }
        
        .detail-value {
            font-weight: 500;
            color: var(--neutral-gray-800);
        }
        
        .timeline-actions {
            display: flex;
            gap: 8px;
        }
        
        /* Graphiques */
        .charts-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }
        
        .chart-card {
            background: var(--neutral-white);
            border-radius: 16px;
            padding: 24px;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--neutral-gray-200);
        }
        
        .chart-header {
            margin-bottom: 20px;
        }
        
        .chart-header h3 {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--neutral-gray-800);
            margin: 0;
        }
        
        .chart-placeholder {
            height: 250px;
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--neutral-gray-600);
        }
        
        /* Aucun historique */
        .no-history {
            text-align: center;
            padding: 60px 20px;
            background: var(--neutral-white);
            border-radius: 16px;
            box-shadow: var(--shadow-md);
            margin-bottom: 32px;
        }
        
        .no-history-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #f5f7fa 0%, #e9ecef 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 2rem;
            color: var(--neutral-gray-600);
        }
        
        /* Pagination */
        .pagination-container {
            display: flex;
            justify-content: center;
            margin-top: 32px;
        }
        
        .pagination {
            display: flex;
            gap: 8px;
        }
        
        .page-btn {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            border: 1px solid var(--neutral-gray-300);
            background: var(--neutral-white);
            color: var(--neutral-gray-600);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .page-btn:hover {
            background: var(--neutral-gray-100);
        }
        
        .page-btn.active {
            background: var(--primary-blue);
            color: white;
            border-color: var(--primary-blue);
        }
        
        /* Footer */
        .donor-footer {
            background: var(--neutral-white);
            border-top: 1px solid var(--neutral-gray-200);
            padding: 24px 32px;
            margin-top: 32px;
            margin-left: -32px;
            margin-right: -32px;
            margin-bottom: -32px;
        }
        
        .footer-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .footer-links {
            display: flex;
            gap: 24px;
        }
        
        .footer-link {
            color: var(--neutral-gray-600);
            text-decoration: none;
            font-size: 0.9rem;
            transition: color 0.3s ease;
        }
        
        .footer-link:hover {
            color: var(--primary-blue);
        }
        
        .footer-copyright {
            color: var(--neutral-gray-600);
            font-size: 0.9rem;
        }
        
        /* Responsive */
        @media (max-width: 1200px) {
            .donor-sidebar {
                width: 240px;
            }
            
            .history-main {
                margin-left: 240px;
            }
            
            .charts-container {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 992px) {
            .donor-sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
            }
            
            .donor-sidebar.active {
                transform: translateX(0);
            }
            
            .history-main {
                margin-left: 0;
            }
            
            .header-container {
                padding: 0 16px;
            }
            
            .donor-nav {
                display: none;
            }
            
            .mobile-menu-btn {
                display: flex;
            }
            
            .history-stats {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            .history-main {
                padding: 24px 16px;
            }
            
            .history-stats {
                grid-template-columns: 1fr;
            }
            
            .history-filters {
                flex-direction: column;
                align-items: stretch;
            }
            
            .search-bar {
                max-width: 100%;
            }
            
            .timeline-details {
                grid-template-columns: 1fr;
            }
            
            .footer-content {
                flex-direction: column;
                gap: 16px;
                text-align: center;
            }
        }
        
        @media (max-width: 480px) {
            .table-content {
                font-size: 0.9rem;
            }
            
            .table th,
            .table td {
                padding: 12px 16px;
            }
            
            .row-actions {
                flex-direction: column;
            }
        }
        
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease;
        }
        
        /* Scrollbar personnalis√©e */
        ::-webkit-scrollbar {
            width: 6px;
        }
        
        ::-webkit-scrollbar-track {
            background: var(--neutral-gray-100);
            border-radius: 3px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--primary-blue-light);
            border-radius: 3px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary-blue);
        }
    </style>
</head>
<body>
    <!-- Header Donneur -->
    <header class="donor-header">
        <div class="header-container">
            <!-- Logo et Navigation Mobile -->
            <div style="display: flex; align-items: center;">
                <button class="mobile-menu-btn" id="mobileMenuBtn">
                    <i class="fas fa-bars"></i>
                </button>
                
                <a href="index.html" class="donor-logo">
                    <div class="logo-icon"></div>
                    <div class="logo-text">
                        <h1>BloodLink</h1>
                        <span>Espace Donneur</span>
                    </div>
                </a>
            </div>
            
            <!-- Navigation Principale -->
            <nav class="donor-nav">
                <a href="dashboard.html" class="nav-item">
                    <i class="fas fa-chart-line"></i>
                    Tableau de bord
                </a>
                <a href="alerts.html" class="nav-item">
                    <i class="fas fa-bell"></i>
                    Alertes
                </a>
                <a href="historique.html" class="nav-item active">
                    <i class="fas fa-history"></i>
                    Historique
                </a>
                <a href="recompenses.html" class="nav-item">
                    <i class="fas fa-trophy"></i>
                    R√©compenses
                </a>
                <a href="centres.html" class="nav-item">
                    <i class="fas fa-map-marker-alt"></i>
                    Centres
                </a>
            </nav>
            
            <!-- Actions Droite -->
            <div class="header-actions">
                <!-- Notifications -->
                <div class="notification-wrapper">
                    <button class="notification-btn">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge">3</span>
                    </button>
                </div>
                
                <!-- Profil Donneur -->
                <a href="dashboard.html" class="donor-profile">
                    <div class="donor-avatar">
                        <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face" alt="Jean Dupont">
                    </div>
                    <div class="donor-info">
                        <div class="donor-name">Abibe Diop</div>
                        <div class="donor-status">Donneur O+ ‚Ä¢ 12 dons</div>
                    </div>
                </a>
            </div>
        </div>
    </header>
    
    <!-- Overlay Mobile -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>
    
    <!-- Sidebar Donneur -->
    <aside class="donor-sidebar" id="donorSidebar">
        <div class="sidebar-section">
            <div class="sidebar-title">Mon espace</div>
            <nav class="sidebar-nav">
                <a href="dashboard.html" class="sidebar-link">
                    <div class="nav-icon"><i class="fas fa-chart-pie"></i></div>
                    Vue d'ensemble
                </a>
                <a href="profile.html" class="sidebar-link">
                    <div class="nav-icon"><i class="fas fa-user"></i></div>
                    Mon profil
                </a>
                <a href="analytics.html" class="sidebar-link">
                    <div class="nav-icon"><i class="fas fa-chart-line"></i></div>
                    Statistiques
                </a>
                <a href="recompenses.html" class="sidebar-link">
                    <div class="nav-icon"><i class="fas fa-trophy"></i></div>
                    Mes r√©compenses
                </a>
            </nav>
        </div>
        
        <div class="sidebar-section">
            <div class="sidebar-title">Mes dons</div>
            <nav class="sidebar-nav">
                <a href="espace-donneur.html#donate" class="sidebar-link">
                    <div class="nav-icon"><i class="fas fa-heartbeat"></i></div>
                    Donner maintenant
                </a>
                <a href="historique.html" class="sidebar-link active">
                    <div class="nav-icon"><i class="fas fa-history"></i></div>
                    Historique des dons
                </a>
                <a href="rendez-vous.html" class="sidebar-link">
                    <div class="nav-icon"><i class="fas fa-calendar-alt"></i></div>
                    Mes rendez-vous
                    <span class="nav-badge">2</span>
                </a>
                <a href="eligibilite.html" class="sidebar-link">
                    <div class="nav-icon"><i class="fas fa-check-circle"></i></div>
                    √âligibilit√©
                </a>
            </nav>
        </div>
        
        <div class="sidebar-section">
            <div class="sidebar-title">Urgences</div>
            <nav class="sidebar-nav">
                <a href="alertes.html" class="sidebar-link">
                    <div class="nav-icon"><i class="fas fa-bullhorn"></i></div>
                    Alertes en cours
                    <span class="nav-badge emergency-badge">3</span>
                </a>
                <a href="alertes.html#nearby" class="sidebar-link">
                    <div class="nav-icon"><i class="fas fa-map-marker-alt"></i></div>
                    Pr√®s de chez moi
                </a>
                <a href="alertes.html#emergency" class="sidebar-link">
                    <div class="nav-icon"><i class="fas fa-ambulance"></i></div>
                    Urgences critiques
                </a>
            </nav>
        </div>
        
        <div class="sidebar-section">
            <div class="sidebar-title">Centres</div>
            <nav class="sidebar-nav">
                <a href="centres.html" class="sidebar-link">
                    <div class="nav-icon"><i class="fas fa-hospital"></i></div>
                    Centres de don
                </a>
                <a href="centres.html#favorites" class="sidebar-link">
                    <div class="nav-icon"><i class="fas fa-star"></i></div>
                    Favoris
                </a>
                <a href="centres.html#" class="sidebar-link">
                    <div class="nav-icon"><i class="fas fa-map"></i></div>
                    Carte interactive
                </a>
            </nav>
        </div>
        
        <div class="sidebar-section">
            <div class="sidebar-title">Communaut√©</div>
            <nav class="sidebar-nav">
                <a href="communaut√©.html" class="sidebar-link">
                    <div class="nav-icon"><i class="fas fa-users"></i></div>
                    R√©seau
                </a>
                <a href="messages.html" class="sidebar-link">
                    <div class="nav-icon"><i class="fas fa-comments"></i></div>
                    Messages
                </a>
                <a href="defis.html" class="sidebar-link">
                    <div class="nav-icon"><i class="fas fa-flag"></i></div>
                    D√©fis
                </a>
            </nav>
        </div>
        
        <!-- Section R√©compenses Sidebar -->
        <div class="rewards-section">
            <div class="reward-icon">
                <i class="fas fa-medal"></i>
            </div>
            <div class="reward-text">Niveau Or</div>
            <div class="reward-subtext">Top 15% des donneurs</div>
            <div class="stat-progress">
                <div class="progress-fill" style="width: 75%"></div>
            </div>
        </div>
        
        <div class="sidebar-section">
            <div class="sidebar-title">Param√®tres</div>
            <nav class="sidebar-nav">
                <a href="parametres.html" class="sidebar-link">
                    <div class="nav-icon"><i class="fas fa-cogs"></i></div>
                    Param√®tres
                </a>
                <a href="aide.html" class="sidebar-link">
                    <div class="nav-icon"><i class="fas fa-question-circle"></i></div>
                    Aide & Support
                </a>
                <a href="index.html" class="sidebar-link">
                    <div class="nav-icon"><i class="fas fa-sign-out-alt"></i></div>
                    D√©connexion
                </a>
            </nav>
        </div>
    </aside>
    
    <!-- Contenu Principal Historique -->
    <main class="history-main">
        <!-- En-t√™te -->
        <div class="section-header">
            <h1>Historique des Dons</h1>
            <p class="section-subtitle">Retracez l'ensemble de vos dons, visualisez votre impact et suivez votre progression en tant que donneur.</p>
        </div>
        
        <!-- Statistiques Historique -->
        <div class="history-stats">
            <div class="stat-card success">
                <div class="stat-header">
                    <div class="stat-icon success">
                        <i class="fas fa-heart"></i>
                    </div>
                    <div class="stat-trend trend-up">
                        <i class="fas fa-arrow-up"></i>
                        +12%
                    </div>
                </div>
                <div class="stat-value">12</div>
                <div class="stat-label">Dons r√©alis√©s</div>
            </div>
            
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-icon">
                        <i class="fas fa-user-md"></i>
                    </div>
                    <div class="stat-trend trend-up">
                        <i class="fas fa-arrow-up"></i>
                        +25%
                    </div>
                </div>
                <div class="stat-value">36</div>
                <div class="stat-label">Vies sauv√©es</div>
            </div>
            
            <div class="stat-card warning">
                <div class="stat-header">
                    <div class="stat-icon warning">
                        <i class="fas fa-tint"></i>
                    </div>
                    <div class="stat-trend trend-up">
                        <i class="fas fa-arrow-up"></i>
                        +8%
                    </div>
                </div>
                <div class="stat-value">5.4L</div>
                <div class="stat-label">Sang donn√©</div>
            </div>
            
            <div class="stat-card info">
                <div class="stat-header">
                    <div class="stat-icon info">
                        <i class="fas fa-calendar-alt"></i>
                    </div>
                    <div class="stat-trend trend-down">
                        <i class="fas fa-arrow-down"></i>
                        -15j
                    </div>
                </div>
                <div class="stat-value">15j</div>
                <div class="stat-label">Prochain don</div>
            </div>
        </div>
        
        <!-- Filtres et Recherche -->
        <div class="history-filters">
            <button class="filter-btn active" data-filter="all">
                Tous les dons
                <span class="filter-badge">12</span>
            </button>
            <button class="filter-btn" data-filter="completed">
                <i class="fas fa-check-circle"></i>
                Termin√©s
                <span class="filter-badge">10</span>
            </button>
            <button class="filter-btn" data-filter="scheduled">
                <i class="fas fa-calendar-alt"></i>
                Programm√©s
                <span class="filter-badge">2</span>
            </button>
            <button class="filter-btn" data-filter="cancelled">
                <i class="fas fa-times-circle"></i>
                Annul√©s
                <span class="filter-badge">1</span>
            </button>
            
            <!-- Barre de recherche -->
            <div class="search-bar">
                <i class="fas fa-search search-icon"></i>
                <input type="text" placeholder="Rechercher un don..." id="searchHistory">
            </div>
            
            <!-- P√©riode -->
            <select class="form-select" style="width: 150px;">
                <option value="all">Toute p√©riode</option>
                <option value="month">Ce mois</option>
                <option value="year">Cette ann√©e</option>
                <option value="last-year">L'ann√©e derni√®re</option>
            </select>
        </div>
        
        <!-- Actions Globales -->
        <div class="history-actions">
            <button class="action-btn" onclick="exportHistory()">
                <i class="fas fa-file-export"></i>
                Exporter l'historique
            </button>
            <button class="action-btn" onclick="printHistory()">
                <i class="fas fa-print"></i>
                Imprimer
            </button>
            <button class="action-btn primary" onclick="scheduleNextDonation()">
                <i class="fas fa-calendar-plus"></i>
                Programmer un don
            </button>
        </div>
        
        <!-- Tableau Historique -->
        <div class="history-table-container fade-in">
            <div class="table-header">
                <h3>üìã Liste de tous vos dons</h3>
                <div class="btn-group">
                    <button class="btn btn-outline-primary btn-sm" onclick="switchView('table')">
                        <i class="fas fa-table"></i>
                    </button>
                    <button class="btn btn-outline-primary btn-sm" onclick="switchView('timeline')">
                        <i class="fas fa-stream"></i>
                    </button>
                </div>
            </div>
            <div class="table-content">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Centre</th>
                            <th>Type</th>
                            <th>Volume</th>
                            <th>Impact</th>
                            <th>Statut</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <strong>15 F√©v 2024</strong>
                                <div class="text-muted" style="font-size: 0.8rem;">10:30 - 11:15</div>
                            </td>
                            <td>
                                <div>H√¥pital Saint-Louis</div>
                                <div class="text-muted" style="font-size: 0.8rem;">Paris 15√®me</div>
                            </td>
                            <td>
                                <div>Sang complet</div>
                                <div>
                                    <span class="blood-type-badge blood-type-o-plus">O+</span>
                                </div>
                            </td>
                            <td>450 ml</td>
                            <td>
                                <div class="text-success">
                                    <i class="fas fa-heart"></i>
                                    3 vies
                                </div>
                            </td>
                            <td><span class="status-badge status-completed">Termin√©</span></td>
                            <td>
                                <div class="row-actions">
                                    <button class="row-action-btn" onclick="viewDonationDetails(1)" title="Voir les d√©tails">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="row-action-btn" onclick="downloadCertificate(1)" title="Certificat">
                                        <i class="fas fa-certificate"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <strong>28 Jan 2024</strong>
                                <div class="text-muted" style="font-size: 0.8rem;">14:00 - 15:30</div>
                            </td>
                            <td>
                                <div>Clinique Val d'Or</div>
                                <div class="text-muted" style="font-size: 0.8rem;">Paris 16√®me</div>
                            </td>
                            <td>
                                <div>Plasma</div>
                                <div>
                                    <span class="blood-type-badge blood-type-o-plus">O+</span>
                                </div>
                            </td>
                            <td>600 ml</td>
                            <td>
                                <div class="text-success">
                                    <i class="fas fa-heart"></i>
                                    2 vies
                                </div>
                            </td>
                            <td><span class="status-badge status-completed">Termin√©</span></td>
                            <td>
                                <div class="row-actions">
                                    <button class="row-action-btn" onclick="viewDonationDetails(2)" title="Voir les d√©tails">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="row-action-btn" onclick="downloadCertificate(2)" title="Certificat">
                                        <i class="fas fa-certificate"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <strong>10 Jan 2024</strong>
                                <div class="text-muted" style="font-size: 0.8rem;">09:15 - 10:00</div>
                            </td>
                            <td>
                                <div>Centre Ville</div>
                                <div class="text-muted" style="font-size: 0.8rem;">Paris Centre</div>
                            </td>
                            <td>
                                <div>Sang complet</div>
                                <div>
                                    <span class="blood-type-badge blood-type-o-plus">O+</span>
                                </div>
                            </td>
                            <td>450 ml</td>
                            <td>
                                <div class="text-success">
                                    <i class="fas fa-heart"></i>
                                    3 vies
                                </div>
                            </td>
                            <td><span class="status-badge status-completed">Termin√©</span></td>
                            <td>
                                <div class="row-actions">
                                    <button class="row-action-btn" onclick="viewDonationDetails(3)" title="Voir les d√©tails">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="row-action-btn" onclick="downloadCertificate(3)" title="Certificat">
                                        <i class="fas fa-certificate"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <strong>20 Mars 2024</strong>
                                <div class="text-muted" style="font-size: 0.8rem;">10:00 - 11:00</div>
                            </td>
                            <td>
                                <div>H√¥pital Saint-Louis</div>
                                <div class="text-muted" style="font-size: 0.8rem;">Paris 15√®me</div>
                            </td>
                            <td>
                                <div>Sang complet</div>
                                <div>
                                    <span class="blood-type-badge blood-type-o-plus">O+</span>
                                </div>
                            </td>
                            <td>450 ml</td>
                            <td>
                                <div class="text-warning">
                                    <i class="fas fa-clock"></i>
                                    √Ä venir
                                </div>
                            </td>
                            <td><span class="status-badge status-scheduled">Programm√©</span></td>
                            <td>
                                <div class="row-actions">
                                    <button class="row-action-btn" onclick="viewAppointmentDetails(4)" title="Voir rendez-vous">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="row-action-btn" onclick="rescheduleDonation(4)" title="Reporter">
                                        <i class="fas fa-calendar-alt"></i>
                                    </button>
                                    <button class="row-action-btn" onclick="cancelDonation(4)" title="Annuler">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <strong>15 D√©c 2023</strong>
                                <div class="text-muted" style="font-size: 0.8rem;">11:30 - 12:15</div>
                            </td>
                            <td>
                                <div>Centre Don Mobile</div>
                                <div class="text-muted" style="font-size: 0.8rem;">Place de la R√©publique</div>
                            </td>
                            <td>
                                <div>Sang complet</div>
                                <div>
                                    <span class="blood-type-badge blood-type-o-plus">O+</span>
                                </div>
                            </td>
                            <td>450 ml</td>
                            <td>
                                <div class="text-success">
                                    <i class="fas fa-heart"></i>
                                    3 vies
                                </div>
                            </td>
                            <td><span class="status-badge status-completed">Termin√©</span></td>
                            <td>
                                <div class="row-actions">
                                    <button class="row-action-btn" onclick="viewDonationDetails(5)" title="Voir les d√©tails">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="row-action-btn" onclick="downloadCertificate(5)" title="Certificat">
                                        <i class="fas fa-certificate"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <strong>5 Nov 2023</strong>
                                <div class="text-muted" style="font-size: 0.8rem;">16:00 - 17:30</div>
                            </td>
                            <td>
                                <div>Clinique Val d'Or</div>
                                <div class="text-muted" style="font-size: 0.8rem;">Paris 16√®me</div>
                            </td>
                            <td>
                                <div>Plaquettes</div>
                                <div>
                                    <span class="blood-type-badge blood-type-o-plus">O+</span>
                                </div>
                            </td>
                            <td>500 ml</td>
                            <td>
                                <div class="text-success">
                                    <i class="fas fa-heart"></i>
                                    1 vie
                                </div>
                            </td>
                            <td><span class="status-badge status-completed">Termin√©</span></td>
                            <td>
                                <div class="row-actions">
                                    <button class="row-action-btn" onclick="viewDonationDetails(6)" title="Voir les d√©tails">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="row-action-btn" onclick="downloadCertificate(6)" title="Certificat">
                                        <i class="fas fa-certificate"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- Vue Chronologique (cach√©e par d√©faut) -->
        <div class="timeline-view fade-in" id="timelineView" style="display: none;">
            <div class="timeline-header">
                <h3>‚è≥ Chronologie de vos dons</h3>
                <p class="text-muted mb-0">Parcourez votre historique de dons sous forme de chronologie</p>
            </div>
            
            <div class="timeline">
                <!-- Don 2024 -->
                <div class="timeline-item completed">
                    <div class="timeline-date">2024</div>
                    <div class="timeline-content">
                        <div class="timeline-title">
                            <i class="fas fa-hospital"></i>
                            H√¥pital Saint-Louis
                            <span class="badge bg-success ms-auto">Termin√©</span>
                        </div>
                        <div class="timeline-details">
                            <div class="detail-item">
                                <span class="detail-label">Date</span>
                                <span class="detail-value">15 F√©v 2024 ‚Ä¢ 10:30</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Type</span>
                                <span class="detail-value">Sang complet</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Volume</span>
                                <span class="detail-value">450 ml</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Impact</span>
                                <span class="detail-value text-success">3 vies sauv√©es</span>
                            </div>
                        </div>
                        <div class="timeline-actions">
                            <button class="btn btn-sm btn-outline-primary" onclick="viewDonationDetails(1)">
                                <i class="fas fa-eye"></i>
                                D√©tails
                            </button>
                            <button class="btn btn-sm btn-outline-success" onclick="downloadCertificate(1)">
                                <i class="fas fa-certificate"></i>
                                Certificat
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Don 2023 -->
                <div class="timeline-item completed">
                    <div class="timeline-date">2023</div>
                    <div class="timeline-content">
                        <div class="timeline-title">
                            <i class="fas fa-clinic-medical"></i>
                            Clinique Val d'Or
                            <span class="badge bg-success ms-auto">Termin√©</span>
                        </div>
                        <div class="timeline-details">
                            <div class="detail-item">
                                <span class="detail-label">Date</span>
                                <span class="detail-value">28 Jan 2024 ‚Ä¢ 14:00</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Type</span>
                                <span class="detail-value">Plasma</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Volume</span>
                                <span class="detail-value">600 ml</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Impact</span>
                                <span class="detail-value text-success">2 vies sauv√©es</span>
                            </div>
                        </div>
                        <div class="timeline-actions">
                            <button class="btn btn-sm btn-outline-primary" onclick="viewDonationDetails(2)">
                                <i class="fas fa-eye"></i>
                                D√©tails
                            </button>
                            <button class="btn btn-sm btn-outline-success" onclick="downloadCertificate(2)">
                                <i class="fas fa-certificate"></i>
                                Certificat
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Don Programm√© -->
                <div class="timeline-item scheduled">
                    <div class="timeline-date">√Ä venir</div>
                    <div class="timeline-content">
                        <div class="timeline-title">
                            <i class="fas fa-calendar-check"></i>
                            H√¥pital Saint-Louis
                            <span class="badge bg-warning ms-auto">Programm√©</span>
                        </div>
                        <div class="timeline-details">
                            <div class="detail-item">
                                <span class="detail-label">Date</span>
                                <span class="detail-value">20 Mars 2024 ‚Ä¢ 10:00</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Type</span>
                                <span class="detail-value">Sang complet</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Centre</span>
                                <span class="detail-value">H√¥pital Saint-Louis</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Statut</span>
                                <span class="detail-value text-warning">Confirm√©</span>
                            </div>
                        </div>
                        <div class="timeline-actions">
                            <button class="btn btn-sm btn-outline-primary" onclick="viewAppointmentDetails(4)">
                                <i class="fas fa-eye"></i>
                                D√©tails
                            </button>
                            <button class="btn btn-sm btn-outline-warning" onclick="rescheduleDonation(4)">
                                <i class="fas fa-calendar-alt"></i>
                                Reporter
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Graphiques et Statistiques -->
        <div class="charts-container fade-in">
            <!-- Graphique 1 -->
            <div class="chart-card">
                <div class="chart-header">
                    <h3><i class="fas fa-chart-line"></i> √âvolution de vos dons</h3>
                    <p class="text-muted mb-0">Nombre de dons par mois sur les 12 derniers mois</p>
                </div>
                <div class="chart-placeholder">
                    <div class="text-center">
                        <i class="fas fa-chart-bar fa-3x mb-3"></i>
                        <p>Graphique d'√©volution</p>
                        <small class="text-muted">Donn√©es disponibles</small>
                    </div>
                </div>
            </div>
            
            <!-- Graphique 2 -->
            <div class="chart-card">
                <div class="chart-header">
                    <h3><i class="fas fa-pie-chart"></i> R√©partition par type de don</h3>
                    <p class="text-muted mb-0">Proportion des diff√©rents types de dons r√©alis√©s</p>
                </div>
                <div class="chart-placeholder">
                    <div class="text-center">
                        <i class="fas fa-chart-pie fa-3x mb-3"></i>
                        <p>Graphique circulaire</p>
                        <small class="text-muted">Donn√©es disponibles</small>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- R√©sum√© Annuel -->
        <div class="history-table-container fade-in">
            <div class="table-header">
                <h3>üìä R√©sum√© annuel</h3>
                <select class="form-select" style="width: 150px;">
                    <option value="2024">2024</option>
                    <option value="2023">2023</option>
                    <option value="2022">2022</option>
                    <option value="2021">2021</option>
                </select>
            </div>
            <div class="table-content">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Ann√©e</th>
                            <th>Dons totaux</th>
                            <th>Sang donn√©</th>
                            <th>Vies sauv√©es</th>
                            <th>Centres visit√©s</th>
                            <th>Taux de r√©gularit√©</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>2024</strong> (en cours)</td>
                            <td>3</td>
                            <td>1.5 L</td>
                            <td>8</td>
                            <td>2</td>
                            <td>
                                <div class="progress" style="height: 6px;">
                                    <div class="progress-bar bg-success" style="width: 75%"></div>
                                </div>
                                <small class="text-muted">75%</small>
                            </td>
                        </tr>
                        <tr>
                            <td><strong>2023</strong></td>
                            <td>9</td>
                            <td>3.9 L</td>
                            <td>28</td>
                            <td>3</td>
                            <td>
                                <div class="progress" style="height: 6px;">
                                    <div class="progress-bar bg-success" style="width: 90%"></div>
                                </div>
                                <small class="text-muted">90%</small>
                            </td>
                        </tr>
                        <tr>
                            <td><strong>2022</strong></td>
                            <td>8</td>
                            <td>3.6 L</td>
                            <td>24</td>
                            <td>2</td>
                            <td>
                                <div class="progress" style="height: 6px;">
                                    <div class="progress-bar bg-warning" style="width: 65%"></div>
                                </div>
                                <small class="text-muted">65%</small>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- Pagination -->
        <div class="pagination-container">
            <div class="pagination">
                <button class="page-btn">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <button class="page-btn active">1</button>
                <button class="page-btn">2</button>
                <button class="page-btn">3</button>
                <button class="page-btn">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </div>
        
        <!-- Footer -->
        <footer class="donor-footer">
            <div class="footer-content">
                <div class="footer-links">
                    <a href="#privacy" class="footer-link">Confidentialit√©</a>
                    <a href="#terms" class="footer-link">Conditions</a>
                    <a href="#faq" class="footer-link">FAQ</a>
                    <a href="#contact" class="footer-link">Contact</a>
                </div>
                <div class="footer-copyright">
                    ¬© 2024 BloodLink Pro. Historique v2.2.0
                </div>
            </div>
        </footer>
    </main>
    
    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            // Gestion du menu mobile
            const mobileMenuBtn = document.getElementById('mobileMenuBtn');
            const donorSidebar = document.getElementById('donorSidebar');
            const sidebarOverlay = document.getElementById('sidebarOverlay');
            
            mobileMenuBtn.addEventListener('click', function() {
                donorSidebar.classList.toggle('active');
                sidebarOverlay.classList.toggle('active');
            });
            
            sidebarOverlay.addEventListener('click', function() {
                donorSidebar.classList.remove('active');
                sidebarOverlay.classList.remove('active');
            });
            
            // Gestion des filtres
            initFilters();
            
            // Gestion de la recherche
            initSearch();
            
            // Animation des √©l√©ments
            animateCards();
            
            // Initialiser les tooltips
            initTooltips();
        });
        
        // Initialiser les filtres
        function initFilters() {
            const filterBtns = document.querySelectorAll('.filter-btn');
            const tableRows = document.querySelectorAll('.table tbody tr');
            const timelineItems = document.querySelectorAll('.timeline-item');
            
            filterBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    // Retirer la classe active de tous les boutons
                    filterBtns.forEach(b => b.classList.remove('active'));
                    // Ajouter la classe active au bouton cliqu√©
                    this.classList.add('active');
                    
                    const filter = this.dataset.filter;
                    
                    // Filtrer les lignes du tableau
                    tableRows.forEach(row => {
                        const statusBadge = row.querySelector('.status-badge');
                        const status = getStatusFromBadge(statusBadge);
                        
                        if (filter === 'all' || status === filter) {
                            row.style.display = 'table-row';
                            setTimeout(() => {
                                row.style.opacity = '1';
                            }, 10);
                        } else {
                            row.style.opacity = '0';
                            setTimeout(() => {
                                row.style.display = 'none';
                            }, 300);
                        }
                    });
                    
                    // Filtrer les √©l√©ments de la timeline
                    timelineItems.forEach(item => {
                        const statusClass = Array.from(item.classList).find(cls => 
                            ['completed', 'scheduled', 'cancelled'].includes(cls)
                        );
                        
                        if (filter === 'all' || 
                            (filter === 'completed' && statusClass === 'completed') ||
                            (filter === 'scheduled' && statusClass === 'scheduled') ||
                            (filter === 'cancelled' && statusClass === 'cancelled')) {
                            item.style.display = 'block';
                            setTimeout(() => {
                                item.style.opacity = '1';
                            }, 10);
                        } else {
                            item.style.opacity = '0';
                            setTimeout(() => {
                                item.style.display = 'none';
                            }, 300);
                        }
                    });
                });
            });
        }
        
        // Obtenir le statut √† partir du badge
        function getStatusFromBadge(badge) {
            if (!badge) return '';
            
            const badgeClass = Array.from(badge.classList).find(cls => 
                cls.includes('status-')
            );
            
            if (!badgeClass) return '';
            
            return badgeClass.replace('status-', '');
        }
        
        // Initialiser la recherche
        function initSearch() {
            const searchInput = document.getElementById('searchHistory');
            const tableRows = document.querySelectorAll('.table tbody tr');
            
            searchInput.addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                
                tableRows.forEach(row => {
                    const text = row.textContent.toLowerCase();
                    
                    if (text.includes(searchTerm)) {
                        row.style.display = 'table-row';
                        setTimeout(() => {
                            row.style.opacity = '1';
                        }, 10);
                    } else {
                        row.style.opacity = '0';
                        setTimeout(() => {
                            row.style.display = 'none';
                        }, 300);
                    }
                });
            });
        }
        
        // Changer la vue (tableau/timeline)
        function switchView(viewType) {
            const tableView = document.querySelector('.history-table-container');
            const timelineView = document.getElementById('timelineView');
            
            if (viewType === 'table') {
                tableView.style.display = 'block';
                timelineView.style.display = 'none';
            } else if (viewType === 'timeline') {
                tableView.style.display = 'none';
                timelineView.style.display = 'block';
            }
        }
        
        // Voir les d√©tails d'un don
        function viewDonationDetails(donationId) {
            const donations = {
                1: {
                    date: '15 F√©vrier 2024',
                    time: '10:30 - 11:15',
                    center: 'H√¥pital Saint-Louis',
                    address: '1 Avenue des H√¥pitaux, 75015 Paris',
                    type: 'Sang complet',
                    bloodType: 'O+',
                    volume: '450 ml',
                    duration: '45 minutes',
                    impact: '3 vies sauv√©es',
                    notes: 'Don r√©alis√© dans le cadre d\'une urgence hospitali√®re. Excellent d√©roulement.',
                    doctor: 'Dr. Martin Dupont',
                    certificate: 'BL-CERT-2024-0015'
                },
                2: {
                    date: '28 Janvier 2024',
                    time: '14:00 - 15:30',
                    center: 'Clinique Val d\'Or',
                    address: '45 Rue de la Sant√©, 75016 Paris',
                    type: 'Plasma',
                    bloodType: 'O+',
                    volume: '600 ml',
                    duration: '1h30',
                    impact: '2 vies sauv√©es',
                    notes: 'Don de plasma pour un patient atteint de troubles de la coagulation.',
                    doctor: 'Dr. Sophie Martin',
                    certificate: 'BL-CERT-2024-0028'
                }
            };
            
            const donation = donations[donationId];
            
            if (!donation) {
                showToast('D√©tails du don non disponibles', 'info');
                return;
            }
            
            showModal('D√©tails du don', `
                <div class="mb-4">
                    <h4>Don du ${donation.date}</h4>
                    <p class="text-muted">${donation.center} ‚Ä¢ ${donation.time}</p>
                </div>
                
                <div class="alert alert-success">
                    <i class="fas fa-check-circle"></i>
                    <strong>DON R√âALIS√â AVEC SUCC√àS</strong>
                    <p class="mb-0 mt-1">Votre don a permis de sauver ${donation.impact.toLowerCase()}.</p>
                </div>
                
                <div class="row mb-4">
                    <div class="col-md-6">
                        <div class="card mb-3">
                            <div class="card-body">
                                <h6 class="card-subtitle mb-2 text-muted">Informations m√©dicales</h6>
                                <div class="d-flex justify-content-between mb-2">
                                    <span>Type de don:</span>
                                    <strong>${donation.type}</strong>
                                </div>
                                <div class="d-flex justify-content-between mb-2">
                                    <span>Type sanguin:</span>
                                    <strong><span class="blood-type-badge blood-type-o-plus">${donation.bloodType}</span></strong>
                                </div>
                                <div class="d-flex justify-content-between mb-2">
                                    <span>Volume:</span>
                                    <strong>${donation.volume}</strong>
                                </div>
                                <div class="d-flex justify-content-between">
                                    <span>Dur√©e:</span>
                                    <strong>${donation.duration}</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card mb-3">
                            <div class="card-body">
                                <h6 class="card-subtitle mb-2 text-muted">Centre de don</h6>
                                <p class="card-text">
                                    <i class="fas fa-hospital"></i> ${donation.center}<br>
                                    <i class="fas fa-map-marker-alt"></i> ${donation.address}<br>
                                    <i class="fas fa-user-md"></i> ${donation.doctor}
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="mb-4">
                    <h6>Impact de votre don:</h6>
                    <div class="alert alert-info">
                        <i class="fas fa-heart"></i>
                        <strong>${donation.impact}</strong>
                        <p class="mb-0 mt-1">Votre ${donation.type.toLowerCase()} a √©t√© utilis√© pour ${donation.notes}</p>
                    </div>
                </div>
                
                <div class="mb-4">
                    <h6>Notes m√©dicales:</h6>
                    <div class="card">
                        <div class="card-body">
                            <p class="card-text">${donation.notes}</p>
                            <div class="text-muted">
                                <small><i class="fas fa-user-md"></i> ${donation.doctor}</small>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="mb-4">
                    <h6>Certificat:</h6>
                    <div class="alert alert-light">
                        <i class="fas fa-certificate"></i>
                        <strong>${donation.certificate}</strong>
                        <p class="mb-0 mt-1">Certificat de don disponible au t√©l√©chargement</p>
                    </div>
                </div>
                
                <div class="d-grid gap-2">
                    <button class="btn btn-primary" onclick="downloadCertificate(${donationId})">
                        <i class="fas fa-download"></i>
                        T√©l√©charger le certificat
                    </button>
                    <button class="btn btn-outline-primary" onclick="shareDonation(${donationId})">
                        <i class="fas fa-share"></i>
                        Partager ce don
                    </button>
                </div>
            `);
        }
        
        // Voir les d√©tails d'un rendez-vous
        function viewAppointmentDetails(appointmentId) {
            showModal('D√©tails du rendez-vous', `
                <div class="mb-4">
                    <h4>Rendez-vous programm√©</h4>
                    <p class="text-muted">20 Mars 2024 ‚Ä¢ H√¥pital Saint-Louis</p>
                </div>
                
                <div class="alert alert-warning">
                    <i class="fas fa-calendar-check"></i>
                    <strong>RENDEZ-VOUS CONFIRM√â</strong>
                    <p class="mb-0 mt-1">Votre don est programm√© pour le 20 Mars 2024 √† 10:00</p>
                </div>
                
                <div class="mb-4">
                    <h6>Informations du rendez-vous:</h6>
                    <ul class="list-group">
                        <li class="list-group-item d-flex justify-content-between">
                            <span>Date:</span>
                            <strong>20 Mars 2024</strong>
                        </li>
                        <li class="list-group-item d-flex justify-content-between">
                            <span>Heure:</span>
                            <strong>10:00 - 11:00</strong>
                        </li>
                        <li class="list-group-item d-flex justify-content-between">
                            <span>Centre:</span>
                            <strong>H√¥pital Saint-Louis</strong>
                        </li>
                        <li class="list-group-item d-flex justify-content-between">
                            <span>Type de don:</span>
                            <strong>Sang complet</strong>
                        </li>
                        <li class="list-group-item d-flex justify-content-between">
                            <span>Code rendez-vous:</span>
                            <strong>BL-RDV-4567</strong>
                        </li>
                    </ul>
                </div>
                
                <div class="mb-4">
                    <h6>Centre de don:</h6>
                    <div class="card">
                        <div class="card-body">
                            <h6 class="card-title">H√¥pital Saint-Louis</h6>
                            <p class="card-text">
                                <i class="fas fa-map-marker-alt"></i> 1 Avenue des H√¥pitaux, 75015 Paris<br>
                                <i class="fas fa-phone"></i> 01 23 45 67 89<br>
                                <i class="fas fa-clock"></i> 8h-20h (7j/7)
                            </p>
                        </div>
                    </div>
                </div>
                
                <div class="alert alert-info">
                    <i class="fas fa-info-circle"></i>
                    <strong>Pr√©paration recommand√©e:</strong>
                    <ul class="mb-0 mt-1">
                        <li>Bien vous hydrater la veille et le jour m√™me</li>
                        <li>Manger l√©ger avant le don</li>
                        <li>Apporter une pi√®ce d'identit√©</li>
                        <li>Pr√©voir 1h30 sur place</li>
                    </ul>
                </div>
                
                <div class="d-grid gap-2">
                    <button class="btn btn-primary" onclick="addToCalendar()">
                        <i class="fas fa-calendar-plus"></i>
                        Ajouter √† mon calendrier
                    </button>
                    <button class="btn btn-outline-warning" onclick="rescheduleDonation(${appointmentId})">
                        <i class="fas fa-calendar-alt"></i>
                        Reporter le rendez-vous
                    </button>
                    <button class="btn btn-outline-danger" onclick="cancelDonation(${appointmentId})">
                        <i class="fas fa-times"></i>
                        Annuler le rendez-vous
                    </button>
                </div>
            `);
        }
        
        // T√©l√©charger un certificat
        function downloadCertificate(donationId) {
            showToast('T√©l√©chargement du certificat en cours...', 'info');
            
            // Simulation de t√©l√©chargement
            setTimeout(() => {
                showToast('Certificat t√©l√©charg√© avec succ√®s', 'success');
                
                // Simuler le t√©l√©chargement
                const link = document.createElement('a');
                link.href = 'data:text/html;charset=utf-8,<h1>Certificat de Don</h1><p>Certificat BloodLink Pro</p>';
                link.download = `certificat-don-${donationId}.pdf`;
                link.click();
            }, 1500);
        }
        
        // Reporter un don
        function rescheduleDonation(donationId) {
            showModal('Reporter le don', `
                <div class="mb-4">
                    <h4>Reporter votre don</h4>
                    <p class="text-muted">Choisissez une nouvelle date pour votre rendez-vous</p>
                </div>
                
                <form id="rescheduleForm">
                    <div class="mb-3">
                        <label class="form-label">Nouvelle date souhait√©e</label>
                        <input type="date" class="form-control" min="${new Date().toISOString().split('T')[0]}" required>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Nouveau cr√©neau horaire</label>
                        <select class="form-select" required>
                            <option value="">S√©lectionner...</option>
                            <option value="morning">Matin (8h-12h)</option>
                            <option value="afternoon" selected>Apr√®s-midi (13h-17h)</option>
                            <option value="evening">Soir (17h-20h)</option>
                        </select>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Motif du report (optionnel)</label>
                        <textarea class="form-control" rows="3" placeholder="Pourquoi souhaitez-vous reporter votre don ?"></textarea>
                    </div>
                    
                    <div class="alert alert-warning">
                        <i class="fas fa-exclamation-triangle"></i>
                        <small>Le report d'un don peut avoir un impact sur les stocks de sang disponibles.</small>
                    </div>
                    
                    <div class="d-grid gap-2">
                        <button type="submit" class="btn btn-warning">
                            <i class="fas fa-calendar-alt"></i>
                            Confirmer le report
                        </button>
                        <button type="button" class="btn btn-outline-secondary" onclick="this.closest('.custom-modal').remove()">
                            Annuler
                        </button>
                    </div>
                </form>
            `);
            
            document.getElementById('rescheduleForm').addEventListener('submit', function(e) {
                e.preventDefault();
                showToast('Rendez-vous report√© avec succ√®s', 'success');
                document.querySelector('.custom-modal')?.remove();
            });
        }
        
        // Annuler un don
        function cancelDonation(donationId) {
            if (confirm('√ätes-vous s√ªr de vouloir annuler ce rendez-vous de don ? Cette action est irr√©versible.')) {
                showModal('Annulation du don', `
                    <div class="text-center mb-4">
                        <div style="width: 80px; height: 80px; background: linear-gradient(135deg, #ff5252 0%, #ff1744 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; font-size: 2rem; color: white;">
                            <i class="fas fa-times"></i>
                        </div>
                        <h4>Confirmer l'annulation</h4>
                        <p class="text-muted">Votre annulation peut avoir un impact sur les stocks de sang</p>
                    </div>
                    
                    <div class="mb-4">
                        <label class="form-label">Raison de l'annulation (obligatoire)</label>
                        <select class="form-select" required>
                            <option value="">S√©lectionner une raison...</option>
                            <option value="sickness">Maladie</option>
                            <option value="travel">Voyage</option>
                            <option value="work">Raisons professionnelles</option>
                            <option value="personal">Raisons personnelles</option>
                            <option value="other">Autre</option>
                        </select>
                    </div>
                    
                    <div class="mb-4">
                        <label class="form-label">Commentaires suppl√©mentaires</label>
                        <textarea class="form-control" rows="3" placeholder="Ajoutez des d√©tails si n√©cessaire..."></textarea>
                    </div>
                    
                    <div class="alert alert-danger">
                        <i class="fas fa-exclamation-triangle"></i>
                        <strong>IMPORTANT:</strong>
                        <p class="mb-0 mt-1">En annulant ce rendez-vous, vous privez potentiellement des patients de soins urgents.</p>
                    </div>
                    
                    <div class="d-grid gap-2">
                        <button class="btn btn-danger" onclick="confirmCancellation(${donationId})">
                            <i class="fas fa-times"></i>
                            Confirmer l'annulation
                        </button>
                        <button class="btn btn-outline-secondary" onclick="this.closest('.custom-modal').remove()">
                            <i class="fas fa-arrow-left"></i>
                            Retour
                        </button>
                    </div>
                `);
            }
        }
        
        // Confirmer l'annulation
        function confirmCancellation(donationId) {
            showToast('Rendez-vous annul√©', 'success');
            document.querySelector('.custom-modal')?.remove();
            
            // Mettre √† jour l'interface
            const row = document.querySelector(`tr:nth-child(${donationId})`);
            if (row) {
                const statusCell = row.querySelector('.status-badge');
                statusCell.className = 'status-badge status-cancelled';
                statusCell.textContent = 'Annul√©';
                
                const impactCell = row.querySelector('.text-warning');
                if (impactCell) {
                    impactCell.className = 'text-danger';
                    impactCell.innerHTML = '<i class="fas fa-times"></i> Annul√©';
                }
            }
        }
        
        // Exporter l'historique
        function exportHistory() {
            showModal('Exporter l\'historique', `
                <div class="text-center mb-4">
                    <i class="fas fa-file-export fa-3x text-primary mb-3"></i>
                    <h4>Exporter votre historique</h4>
                    <p class="text-muted">T√©l√©chargez votre historique de dons complet</p>
                </div>
                
                <div class="mb-4">
                    <h6>Format d'export:</h6>
                    <div class="list-group">
                        <label class="list-group-item">
                            <input class="form-check-input me-2" type="radio" name="exportFormat" value="pdf" checked>
                            <strong>PDF</strong>
                            <small class="text-muted d-block">Document imprimable avec mise en page</small>
                        </label>
                        <label class="list-group-item">
                            <input class="form-check-input me-2" type="radio" name="exportFormat" value="csv">
                            <strong>CSV</strong>
                            <small class="text-muted d-block">Format tableur (Excel, Google Sheets)</small>
                        </label>
                        <label class="list-group-item">
                            <input class="form-check-input me-2" type="radio" name="exportFormat" value="json">
                            <strong>JSON</strong>
                            <small class="text-muted d-block">Format technique pour d√©veloppeurs</small>
                        </label>
                    </div>
                </div>
                
                <div class="mb-4">
                    <h6>P√©riode:</h6>
                    <select class="form-select">
                        <option value="all">Historique complet</option>
                        <option value="year">Cette ann√©e</option>
                        <option value="last-year">L'ann√©e derni√®re</option>
                        <option value="custom">P√©riode personnalis√©e</option>
                    </select>
                </div>
                
                <div class="mb-4">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="includeCertificates" checked>
                        <label class="form-check-label" for="includeCertificates">
                            Inclure les certificats de don
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="includeStatistics" checked>
                        <label class="form-check-label" for="includeStatistics">
                            Inclure les statistiques
                        </label>
                    </div>
                </div>
                
                <div class="d-grid">
                    <button class="btn btn-primary btn-lg" onclick="startExport()">
                        <i class="fas fa-download"></i>
                        G√©n√©rer l'export
                    </button>
                </div>
            `);
        }
        
        // D√©marrer l'export
        function startExport() {
            showToast('G√©n√©ration de l\'export en cours...', 'info');
            
            // Simulation de g√©n√©ration
            setTimeout(() => {
                showToast('Export t√©l√©charg√© avec succ√®s', 'success');
                document.querySelector('.custom-modal')?.remove();
                
                // Simuler un t√©l√©chargement
                const link = document.createElement('a');
                link.href = 'data:text/csv;charset=utf-8,Date;Centre;Type;Volume;Impact;Statut\n15%20F√©v%202024;H√¥pital%20Saint-Louis;Sang%20complet;450ml;3%20vies;Termin√©';
                link.download = 'historique-dons-bloodlink.csv';
                link.click();
            }, 2000);
        }
        
        // Imprimer l'historique
        function printHistory() {
            showToast('Pr√©paration de l\'impression...', 'info');
            setTimeout(() => {
                window.print();
            }, 1000);
        }
        
        // Programmer un nouveau don
        function scheduleNextDonation() {
            window.location.href = 'espace-donneur.html#donate';
        }
        
        // Partager un don
        function shareDonation(donationId) {
            if (navigator.share) {
                navigator.share({
                    title: 'Mon don de sang - BloodLink',
                    text: `J'ai r√©alis√© un don de sang le ${new Date().toLocaleDateString('fr-FR')}. Rejoignez-moi pour sauver des vies !`,
                    url: window.location.href
                });
            } else {
                showModal('Partager votre don', `
                    <div class="text-center mb-4">
                        <i class="fas fa-share-alt fa-3x text-primary mb-3"></i>
                        <h4>Partager votre don</h4>
                        <p class="text-muted">Inspirez vos proches √† donner √† leur tour</p>
                    </div>
                    
                    <div class="mb-4">
                        <label class="form-label">Message personnalis√©:</label>
                        <textarea class="form-control" rows="3">üéóÔ∏è JE VIENS DE SAUVER DES VIES ! üéóÔ∏è

Gr√¢ce √† BloodLink, j'ai pu donner mon sang et contribuer √† sauver des vies.

Rejoignez-moi dans cette aventure humaine :
bloodlink-pro.com/donner

#DonDeSang #BloodLink #SauverDesVies</textarea>
                    </div>
                    
                    <div class="text-center">
                        <p class="text-muted">Partagez sur :</p>
                        <div class="d-flex justify-content-center gap-3">
                            <button class="btn btn-success btn-circle" onclick="shareOnSocial('whatsapp')">
                                <i class="fab fa-whatsapp"></i>
                            </button>
                            <button class="btn btn-primary btn-circle" onclick="shareOnSocial('facebook')">
                                <i class="fab fa-facebook"></i>
                            </button>
                            <button class="btn btn-info btn-circle" onclick="shareOnSocial('twitter')">
                                <i class="fab fa-twitter"></i>
                            </button>
                            <button class="btn btn-danger btn-circle" onclick="shareOnSocial('email')">
                                <i class="fas fa-envelope"></i>
                            </button>
                        </div>
                    </div>
                `);
            }
        }
        
        // Ajouter √† l'agenda
        function addToCalendar() {
            showToast('Ajout √† votre calendrier...', 'info');
        }
        
        // Partager sur les r√©seaux sociaux
        function shareOnSocial(platform) {
            showToast(`Partage sur ${platform}...`, 'info');
        }
        
        // Afficher un modal
        function showModal(title, content) {
            // Supprimer l'ancien modal s'il existe
            const existingModal = document.querySelector('.custom-modal');
            if (existingModal) {
                existingModal.remove();
            }
            
            // Cr√©er le modal
            const modal = document.createElement('div');
            modal.className = 'custom-modal';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.5);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 1002;
                animation: fadeIn 0.3s ease;
                padding: 20px;
            `;
            
            modal.innerHTML = `
                <div style="background: white; border-radius: 16px; width: 100%; max-width: 500px; max-height: 90vh; overflow-y: auto; box-shadow: var(--shadow-xl);">
                    <div style="padding: 24px; border-bottom: 1px solid var(--neutral-gray-200);">
                        <h3 style="margin: 0; color: var(--neutral-gray-800);">${title}</h3>
                    </div>
                    <div style="padding: 24px;">
                        ${content}
                    </div>
                    <div style="padding: 16px 24px; border-top: 1px solid var(--neutral-gray-200); text-align: right;">
                        <button onclick="this.closest('.custom-modal').remove()" style="background: none; border: none; color: var(--neutral-gray-600); cursor: pointer; padding: 8px 16px; border-radius: 8px;">
                            Fermer
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.remove();
                }
            });
        }
        
        // Afficher un toast
        function showToast(message, type) {
            // Cr√©er le toast
            const toast = document.createElement('div');
            toast.className = `toast position-fixed top-0 end-0 mt-3 me-3`;
            toast.style.zIndex = '10000';
            
            const bgColor = type === 'success' ? 'bg-success' : type === 'error' ? 'bg-danger' : 'bg-info';
            
            toast.innerHTML = `
                <div class="toast-header ${bgColor} text-white">
                    <strong class="me-auto">BloodLink</strong>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast"></button>
                </div>
                <div class="toast-body">
                    ${message}
                </div>
            `;
            
            document.body.appendChild(toast);
            
            // Initialiser le toast Bootstrap
            const bsToast = new bootstrap.Toast(toast, { delay: 3000 });
            bsToast.show();
            
            // Supprimer le toast apr√®s fermeture
            toast.addEventListener('hidden.bs.toast', function() {
                toast.remove();
            });
        }
        
        // Animation des cartes
        function animateCards() {
            const cards = document.querySelectorAll('.fade-in');
            cards.forEach((card, index) => {
                card.style.animationDelay = `${index * 0.1}s`;
            });
        }
        
        // Initialiser les tooltips
        function initTooltips() {
            const tooltips = document.querySelectorAll('[title]');
            tooltips.forEach(el => {
                new bootstrap.Tooltip(el);
            });
        }
    </script>
</body>
</html>