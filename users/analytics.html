<!DOCTYPE html>
<html lang="fr" data-bs-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mes Statistiques | BloodLink Pro - Espace Donneur</title>
    
    <!-- CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.min.css" rel="stylesheet">
    
    <style>
        :root {
            --primary-blue: #1a73e8;
            --primary-blue-dark: #0d47a1;
            --primary-blue-light: #4285f4;
            --medical-blue: #1976d2;
            --hospital-blue: #1565c0;
            --accent-teal: #00bcd4;
            --accent-green: #4caf50;
            --accent-orange: #ff9800;
            --accent-red: #f44336;
            --accent-purple: #9c27b0;
            --accent-gold: #FFD700;
            --accent-amber: #FFC107;
            --accent-lime: #CDDC39;
            --accent-cyan: #00BCD4;
            --neutral-white: #ffffff;
            --neutral-cream: #fefefe;
            --neutral-ivory: #f9f9f9;
            --neutral-pearl: #f5f5f5;
            --neutral-silver: #f0f0f0;
            --neutral-platinum: #e8e8e8;
            --neutral-steel: #e0e0e0;
            --neutral-graphite: #757575;
            --neutral-slate: #616161;
            --neutral-charcoal: #424242;
            --gradient-primary: linear-gradient(135deg, var(--primary-blue) 0%, var(--hospital-blue) 100%);
            --gradient-accent: linear-gradient(135deg, var(--accent-teal) 0%, var(--accent-green) 100%);
            --gradient-emergency: linear-gradient(135deg, #ff5252 0%, #ff1744 100%);
            --gradient-success: linear-gradient(135deg, #4caf50 0%, #2e7d32 100%);
            --gradient-warning: linear-gradient(135deg, #ff9800 0%, #ff5722 100%);
            --gradient-gold: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            --gradient-silver: linear-gradient(135deg, #E0E0E0 0%, #BDBDBD 100%);
            --gradient-platinum: linear-gradient(135deg, #E5E4E2 0%, #C0C0C0 100%);
            --shadow-sm: 0 2px 8px rgba(25, 118, 210, 0.08);
            --shadow-md: 0 4px 16px rgba(25, 118, 210, 0.12);
            --shadow-lg: 0 8px 32px rgba(25, 118, 210, 0.16);
            --shadow-xl: 0 12px 48px rgba(25, 118, 210, 0.2);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, var(--neutral-pearl) 0%, var(--neutral-silver) 100%);
            min-height: 100vh;
            color: var(--neutral-charcoal);
            overflow-x: hidden;
        }
        
        /* ====== HEADER DONNEUR ====== */
        .donor-header {
            background: var(--neutral-white);
            border-bottom: 1px solid var(--neutral-platinum);
            box-shadow: var(--shadow-sm);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            padding: 0;
            height: 70px;
        }
        
        .header-container {
            max-width: 100%;
            padding: 0 24px;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .donor-logo {
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
        }
        
        .logo-icon {
            width: 40px;
            height: 40px;
            background: var(--gradient-primary);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }
        
        .logo-icon::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z'/%3E%3C/svg%3E") center no-repeat;
            opacity: 0.9;
        }
        
        .logo-text {
            display: flex;
            flex-direction: column;
        }
        
        .logo-text h1 {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary-blue);
            line-height: 1;
            letter-spacing: -0.5px;
        }
        
        .logo-text span {
            font-size: 0.75rem;
            color: var(--accent-teal);
            font-weight: 600;
            letter-spacing: 1px;
            text-transform: uppercase;
        }
        
        /* Navigation */
        .donor-nav {
            display: flex;
            gap: 2px;
            margin-left: 32px;
        }
        
        .nav-item {
            padding: 12px 20px;
            text-decoration: none;
            color: var(--neutral-slate);
            font-weight: 500;
            font-size: 0.95rem;
            border-radius: 8px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            position: relative;
        }
        
        .nav-item:hover {
            color: var(--primary-blue);
            background: rgba(25, 118, 210, 0.05);
        }
        
        .nav-item.active {
            color: var(--primary-blue);
            background: rgba(25, 118, 210, 0.1);
        }
        
        .nav-item.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 20%;
            right: 20%;
            height: 2px;
            background: var(--primary-blue);
            border-radius: 1px;
        }
        
        /* Zone Actions Droite */
        .header-actions {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .notification-wrapper {
            position: relative;
        }
        
        .notification-btn {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            border: 1px solid var(--neutral-platinum);
            background: var(--neutral-white);
            color: var(--neutral-slate);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .notification-btn:hover {
            background: var(--neutral-pearl);
            color: var(--primary-blue);
            border-color: var(--primary-blue-light);
        }
        
        .notification-badge {
            position: absolute;
            top: -4px;
            right: -4px;
            background: var(--accent-red);
            color: white;
            font-size: 0.7rem;
            font-weight: 600;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid var(--neutral-white);
        }
        
        .donor-profile {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px 12px;
            border-radius: 12px;
            transition: all 0.3s ease;
            cursor: pointer;
            text-decoration: none;
        }
        
        .donor-profile:hover {
            background: rgba(25, 118, 210, 0.05);
        }
        
        .donor-avatar {
            width: 44px;
            height: 44px;
            border-radius: 12px;
            overflow: hidden;
            border: 2px solid var(--primary-blue-light);
            padding: 2px;
            background: var(--neutral-white);
        }
        
        .donor-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 8px;
        }
        
        .donor-info {
            display: flex;
            flex-direction: column;
        }
        
        .donor-name {
            font-weight: 600;
            color: var(--neutral-charcoal);
            font-size: 0.95rem;
        }
        
        .donor-status {
            font-size: 0.8rem;
            color: var(--accent-teal);
            font-weight: 500;
        }
        
        /* ====== SIDEBAR DONNEUR ====== */
        .donor-sidebar {
            position: fixed;
            left: 0;
            top: 70px;
            bottom: 0;
            width: 280px;
            background: var(--neutral-white);
            border-right: 1px solid var(--neutral-platinum);
            padding: 24px 0;
            overflow-y: auto;
            z-index: 999;
            box-shadow: var(--shadow-sm);
        }
        
        .sidebar-section {
            padding: 0 20px;
            margin-bottom: 28px;
        }
        
        .sidebar-title {
            font-size: 0.75rem;
            color: var(--neutral-graphite);
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
            margin-bottom: 16px;
            padding-left: 12px;
        }
        
        .sidebar-nav {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }
        
        .sidebar-link {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            text-decoration: none;
            color: var(--neutral-slate);
            border-radius: 8px;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .sidebar-link:hover {
            background: rgba(25, 118, 210, 0.05);
            color: var(--primary-blue);
            transform: translateX(4px);
        }
        
        .sidebar-link.active {
            background: rgba(25, 118, 210, 0.1);
            color: var(--primary-blue);
            font-weight: 500;
        }
        
        .sidebar-link.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 3px;
            height: 60%;
            background: var(--primary-blue);
            border-radius: 0 3px 3px 0;
        }
        
        .nav-icon {
            width: 20px;
            text-align: center;
            font-size: 1.1rem;
        }
        
        /* ====== CONTENU PRINCIPAL - STATISTIQUES ====== */
        .stats-main {
            margin-left: 280px;
            margin-top: 70px;
            padding: 32px;
            min-height: calc(100vh - 70px);
        }
        
        /* Header Statistiques */
        .stats-header {
            background: var(--neutral-white);
            border-radius: 16px;
            padding: 32px;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--neutral-platinum);
            margin-bottom: 32px;
            position: relative;
            overflow: hidden;
        }
        
        .stats-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-primary);
        }
        
        .stats-title-section {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 32px;
        }
        
        .stats-title-section h1 {
            font-family: 'Montserrat', sans-serif;
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--primary-blue-dark);
            margin: 0;
        }
        
        .period-selector {
            display: flex;
            gap: 8px;
            background: var(--neutral-pearl);
            padding: 4px;
            border-radius: 12px;
        }
        
        .period-btn {
            padding: 8px 16px;
            border: none;
            background: none;
            border-radius: 8px;
            font-weight: 500;
            color: var(--neutral-slate);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .period-btn:hover {
            background: rgba(25, 118, 210, 0.05);
            color: var(--primary-blue);
        }
        
        .period-btn.active {
            background: var(--neutral-white);
            color: var(--primary-blue);
            box-shadow: var(--shadow-sm);
        }
        
        /* Cartes de résumé */
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 32px;
        }
        
        .summary-card {
            background: var(--neutral-white);
            border-radius: 12px;
            padding: 24px;
            border: 1px solid var(--neutral-platinum);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .summary-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-blue-light);
        }
        
        .summary-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
        }
        
        .summary-card.lives::before {
            background: var(--gradient-success);
        }
        
        .summary-card.donations::before {
            background: var(--gradient-primary);
        }
        
        .summary-card.impact::before {
            background: var(--gradient-gold);
        }
        
        .summary-card.response::before {
            background: var(--gradient-warning);
        }
        
        .summary-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }
        
        .summary-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
        }
        
        .summary-icon.lives {
            background: var(--gradient-success);
        }
        
        .summary-icon.donations {
            background: var(--gradient-primary);
        }
        
        .summary-icon.impact {
            background: var(--gradient-gold);
        }
        
        .summary-icon.response {
            background: var(--gradient-warning);
        }
        
        .trend-badge {
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }
        
        .trend-badge.up {
            background: rgba(76, 175, 80, 0.1);
            color: var(--accent-green);
        }
        
        .trend-badge.down {
            background: rgba(244, 67, 54, 0.1);
            color: var(--accent-red);
        }
        
        .summary-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--neutral-charcoal);
            margin-bottom: 8px;
        }
        
        .summary-label {
            font-size: 0.95rem;
            color: var(--neutral-graphite);
            margin-bottom: 16px;
        }
        
        .summary-progress {
            height: 6px;
            background: var(--neutral-platinum);
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 12px;
        }
        
        .progress-fill {
            height: 100%;
            border-radius: 3px;
            transition: width 1s ease;
        }
        
        .summary-progress.lives .progress-fill {
            background: var(--gradient-success);
        }
        
        .summary-progress.donations .progress-fill {
            background: var(--gradient-primary);
        }
        
        .summary-meta {
            display: flex;
            justify-content: space-between;
            font-size: 0.85rem;
            color: var(--neutral-graphite);
        }
        
        /* Widgets de Performance */
        .performance-widgets {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 24px;
            margin-bottom: 32px;
        }
        
        .performance-widget {
            background: var(--neutral-white);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--neutral-platinum);
            transition: all 0.3s ease;
        }
        
        .performance-widget:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        .widget-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }
        
        .widget-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: white;
        }
        
        .widget-icon.efficiency {
            background: var(--gradient-success);
        }
        
        .widget-icon.consistency {
            background: var(--gradient-primary);
        }
        
        .widget-icon.frequency {
            background: var(--gradient-gold);
        }
        
        .widget-title {
            flex: 1;
            font-weight: 600;
            color: var(--neutral-charcoal);
        }
        
        .widget-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--neutral-charcoal);
            margin-bottom: 8px;
        }
        
        .widget-trend {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 0.85rem;
            font-weight: 500;
        }
        
        /* Section Graphiques */
        .charts-section {
            background: var(--neutral-white);
            border-radius: 16px;
            padding: 32px;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--neutral-platinum);
            margin-bottom: 32px;
        }
        
        .section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 32px;
            flex-wrap: wrap;
            gap: 16px;
        }
        
        .section-header h2 {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary-blue-dark);
            margin: 0;
        }
        
        .chart-controls {
            display: flex;
            gap: 12px;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .chart-type-selector {
            display: flex;
            gap: 4px;
            background: var(--neutral-pearl);
            padding: 4px;
            border-radius: 8px;
        }
        
        .chart-type-btn {
            padding: 8px 16px;
            border: none;
            background: none;
            border-radius: 6px;
            font-size: 0.9rem;
            color: var(--neutral-slate);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .chart-type-btn:hover {
            background: rgba(25, 118, 210, 0.05);
            color: var(--primary-blue);
        }
        
        .chart-type-btn.active {
            background: var(--neutral-white);
            color: var(--primary-blue);
            box-shadow: var(--shadow-sm);
        }
        
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 32px;
            margin-bottom: 32px;
        }
        
        .chart-container {
            background: var(--neutral-pearl);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--neutral-platinum);
            height: 400px;
            position: relative;
        }
        
        .chart-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 12px;
        }
        
        .chart-title {
            font-weight: 600;
            color: var(--neutral-charcoal);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .chart-actions {
            display: flex;
            gap: 8px;
        }
        
        .chart-action-btn {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            border: 1px solid var(--neutral-platinum);
            background: var(--neutral-white);
            color: var(--neutral-slate);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .chart-action-btn:hover {
            background: var(--neutral-pearl);
            color: var(--primary-blue);
        }
        
        /* Onglets Détails */
        .details-section {
            background: var(--neutral-white);
            border-radius: 16px;
            padding: 32px;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--neutral-platinum);
        }
        
        .details-tabs {
            display: flex;
            gap: 4px;
            background: var(--neutral-pearl);
            padding: 4px;
            border-radius: 12px;
            margin-bottom: 32px;
            flex-wrap: wrap;
        }
        
        .details-tab {
            flex: 1;
            min-width: 120px;
            padding: 12px 16px;
            border: none;
            background: none;
            border-radius: 8px;
            font-weight: 500;
            color: var(--neutral-slate);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .details-tab:hover {
            background: rgba(25, 118, 210, 0.05);
            color: var(--primary-blue);
        }
        
        .details-tab.active {
            background: var(--neutral-white);
            color: var(--primary-blue);
            box-shadow: var(--shadow-sm);
        }
        
        .details-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .details-content.active {
            display: block;
        }
        
        /* Grid de comparaison */
        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 24px;
        }
        
        .comparison-card {
            background: var(--neutral-pearl);
            border-radius: 12px;
            padding: 24px;
            border: 1px solid var(--neutral-platinum);
        }
        
        /* Tableaux */
        .stats-table-container {
            overflow-x: auto;
            border-radius: 12px;
            border: 1px solid var(--neutral-platinum);
        }
        
        .stats-table {
            width: 100%;
            border-collapse: collapse;
            min-width: 800px;
        }
        
        .stats-table th {
            background: var(--neutral-pearl);
            padding: 16px 24px;
            text-align: left;
            font-weight: 600;
            color: var(--neutral-charcoal);
            border-bottom: 1px solid var(--neutral-platinum);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .stats-table td {
            padding: 16px 24px;
            border-bottom: 1px solid var(--neutral-platinum);
            color: var(--neutral-charcoal);
        }
        
        .stats-table tr:last-child td {
            border-bottom: none;
        }
        
        .stats-table tr:hover {
            background: rgba(25, 118, 210, 0.02);
        }
        
        /* Section Export */
        .export-section {
            background: var(--neutral-white);
            border-radius: 16px;
            padding: 32px;
            margin-top: 32px;
            border: 1px solid var(--neutral-platinum);
            box-shadow: var(--shadow-md);
        }
        
        .export-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 16px;
        }
        
        .export-btn {
            padding: 16px;
            border-radius: 12px;
            border: 1px solid var(--neutral-platinum);
            background: var(--neutral-white);
            color: var(--neutral-charcoal);
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }
        
        .export-btn:hover {
            background: var(--neutral-pearl);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        /* Badges et couleurs */
        .badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 4px;
        }
        
        .bg-success {
            background: rgba(76, 175, 80, 0.1) !important;
            color: var(--accent-green) !important;
        }
        
        .bg-warning {
            background: rgba(255, 152, 0, 0.1) !important;
            color: var(--accent-orange) !important;
        }
        
        .bg-primary {
            background: rgba(25, 118, 210, 0.1) !important;
            color: var(--medical-blue) !important;
        }
        
        .bg-info {
            background: rgba(0, 188, 212, 0.1) !important;
            color: var(--accent-teal) !important;
        }
        
        /* Alerts */
        .alert {
            padding: 1rem;
            border-radius: 0.5rem;
            margin-bottom: 1rem;
            border: 1px solid;
        }
        
        .alert-success {
            background-color: rgba(76, 175, 80, 0.1);
            border-color: rgba(76, 175, 80, 0.2);
            color: var(--accent-green);
        }
        
        .alert-info {
            background-color: rgba(0, 188, 212, 0.1);
            border-color: rgba(0, 188, 212, 0.2);
            color: var(--accent-teal);
        }
        
        .alert-warning {
            background-color: rgba(255, 152, 0, 0.1);
            border-color: rgba(255, 152, 0, 0.2);
            color: var(--accent-orange);
        }
        
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease;
        }
        
        /* ====== RESPONSIVE DESIGN ====== */
        
        /* Mobile Menu Button */
        .mobile-menu-btn {
            display: none;
            width: 40px;
            height: 40px;
            border-radius: 10px;
            border: 1px solid var(--neutral-platinum);
            background: var(--neutral-white);
            color: var(--neutral-slate);
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .mobile-menu-btn:hover {
            background: var(--neutral-pearl);
            border-color: var(--primary-blue);
            color: var(--primary-blue);
        }
        
        /* Overlay Mobile */
        .sidebar-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.3);
            z-index: 998;
        }
        
        .sidebar-overlay.active {
            display: block;
        }
        
        /* Responsive Breakpoints */
        @media (min-width: 1200px) {
            .stats-main {
                margin-left: 280px;
            }
        }
        
        @media (max-width: 1199px) {
            .donor-sidebar {
                width: 240px;
            }
            
            .stats-main {
                margin-left: 240px;
            }
            
            .summary-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .performance-widgets {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .charts-grid {
                grid-template-columns: 1fr;
            }
            
            .comparison-grid {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 991px) {
            .donor-sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
                width: 280px;
            }
            
            .donor-sidebar.active {
                transform: translateX(0);
            }
            
            .stats-main {
                margin-left: 0;
                padding: 24px;
            }
            
            .mobile-menu-btn {
                display: flex;
            }
            
            .donor-nav {
                display: none;
            }
            
            .stats-title-section {
                flex-direction: column;
                align-items: flex-start;
                gap: 16px;
            }
            
            .period-selector {
                width: 100%;
                overflow-x: auto;
            }
            
            .performance-widgets {
                grid-template-columns: 1fr;
            }
            
            .chart-controls {
                width: 100%;
                justify-content: space-between;
            }
        }
        
        @media (max-width: 767px) {
            .stats-main {
                padding: 20px 16px;
            }
            
            .stats-header,
            .charts-section,
            .details-section,
            .export-section {
                padding: 24px 20px;
            }
            
            .summary-grid {
                grid-template-columns: 1fr;
                gap: 16px;
            }
            
            .summary-value {
                font-size: 2rem;
            }
            
            .section-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 12px;
            }
            
            .chart-controls {
                flex-direction: column;
                align-items: flex-start;
                gap: 12px;
            }
            
            .chart-type-selector {
                width: 100%;
                justify-content: center;
            }
            
            .chart-container {
                height: 350px;
            }
            
            .details-tabs {
                flex-direction: column;
            }
            
            .details-tab {
                min-width: 100%;
            }
            
            .export-options {
                grid-template-columns: 1fr;
            }
            
            .header-container {
                padding: 0 16px;
            }
            
            .logo-text h1 {
                font-size: 1.5rem;
            }
        }
        
        @media (max-width: 575px) {
            .stats-title-section h1 {
                font-size: 1.8rem;
            }
            
            .chart-container {
                height: 300px;
                padding: 16px;
            }
            
            .chart-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 12px;
            }
            
            .chart-actions {
                align-self: flex-end;
            }
            
            .stats-table {
                min-width: 600px;
            }
            
            .summary-card {
                padding: 20px;
            }
            
            .performance-widget {
                padding: 16px;
            }
            
            .widget-value {
                font-size: 1.5rem;
            }
            
            .export-btn {
                padding: 12px;
                font-size: 0.9rem;
            }
        }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: var(--neutral-pearl);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--primary-blue-light);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary-blue);
        }
        
        /* Utilitaires */
        .text-success {
            color: var(--accent-green) !important;
        }
        
        .text-warning {
            color: var(--accent-orange) !important;
        }
        
        .text-danger {
            color: var(--accent-red) !important;
        }
        
        .mt-3 { margin-top: 1rem !important; }
        .mt-4 { margin-top: 1.5rem !important; }
        .mb-0 { margin-bottom: 0 !important; }
        .mb-3 { margin-bottom: 1rem !important; }
        .mb-4 { margin-bottom: 1.5rem !important; }
        .me-2 { margin-right: 0.5rem !important; }
        
        .btn-sm {
            padding: 0.25rem 0.5rem;
            font-size: 0.875rem;
            border-radius: 0.25rem;
        }
        
        .btn-outline-primary {
            color: var(--primary-blue);
            border-color: var(--primary-blue);
        }
        
        .btn-outline-primary:hover {
            background-color: var(--primary-blue);
            border-color: var(--primary-blue);
            color: white;
        }
    </style>
</head>
<body>
    <!-- Header Donneur -->
    <header class="donor-header">
        <div class="header-container">
            <!-- Logo et Navigation Mobile -->
            <div style="display: flex; align-items: center; gap: 16px;">
                <button class="mobile-menu-btn" id="mobileMenuBtn">
                    <i class="fas fa-bars"></i>
                </button>
                
                <a href="dashboard.html" class="donor-logo">
                    <div class="logo-icon"></div>
                    <div class="logo-text">
                        <h1>BloodLink</h1>
                        <span>Espace Donneur</span>
                    </div>
                </a>
            </div>
            
            <!-- Navigation Principale -->
            <nav class="donor-nav">
                <a href="dashboard.html" class="nav-item">
                    <i class="fas fa-chart-line"></i>
                    Tableau de bord
                </a>
                <a href="alerts.html" class="nav-item">
                    <i class="fas fa-bell"></i>
                    Alertes
                </a>
                <a href="historique.html" class="nav-item">
                    <i class="fas fa-history"></i>
                    Historique
                </a>
                <a href="analytics.html" class="nav-item active">
                    <i class="fas fa-chart-line"></i>
                    Statistiques
                </a>
                <a href="centres.html" class="nav-item">
                    <i class="fas fa-map-marker-alt"></i>
                    Centres
                </a>
            </nav>
            
            <!-- Actions Droite -->
            <div class="header-actions">
                <!-- Notifications -->
                <div class="notification-wrapper">
                    <button class="notification-btn">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge">3</span>
                    </button>
                </div>
                
                <!-- Profil Donneur -->
                <a href="profile.html" class="donor-profile">
                    <div class="donor-avatar">
                        <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face" alt="Abibe Diop">
                    </div>
                    <div class="donor-info">
                        <div class="donor-name">Abibe Diop</div>
                        <div class="donor-status">Donneur O+ • Niveau Or</div>
                    </div>
                </a>
            </div>
        </div>
    </header>
    
    <!-- Overlay Mobile -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>
    
    <!-- Sidebar Donneur -->
    <aside class="donor-sidebar" id="donorSidebar">
        <div class="sidebar-section">
            <div class="sidebar-title">Mon espace</div>
            <nav class="sidebar-nav">
                <a href="dashboard.html" class="sidebar-link">
                    <div class="nav-icon"><i class="fas fa-chart-pie"></i></div>
                    Vue d'ensemble
                </a>
                <a href="profile.html" class="sidebar-link">
                    <div class="nav-icon"><i class="fas fa-user"></i></div>
                    Mon profil
                </a>
                <a href="analytics.html" class="sidebar-link active">
                    <div class="nav-icon"><i class="fas fa-chart-line"></i></div>
                    Statistiques
                </a>
                <a href="recompences.html" class="sidebar-link">
                    <div class="nav-icon"><i class="fas fa-trophy"></i></div>
                    Mes récompenses
                </a>
            </nav>
        </div>
        
        <div class="sidebar-section">
            <div class="sidebar-title">Mes dons</div>
            <nav class="sidebar-nav">
                <a href="donate.html" class="sidebar-link">
                    <div class="nav-icon"><i class="fas fa-heartbeat"></i></div>
                    Donner maintenant
                </a>
                <a href="historique.html" class="sidebar-link">
                    <div class="nav-icon"><i class="fas fa-history"></i></div>
                    Historique des dons
                </a>
                <a href="appointments.html" class="sidebar-link">
                    <div class="nav-icon"><i class="fas fa-calendar-alt"></i></div>
                    Mes rendez-vous
                </a>
                <a href="eligibility.html" class="sidebar-link">
                    <div class="nav-icon"><i class="fas fa-check-circle"></i></div>
                    Éligibilité
                </a>
            </nav>
        </div>
        
        <div class="sidebar-section">
            <div class="sidebar-title">Paramètres</div>
            <nav class="sidebar-nav">
                <a href="#settings" class="sidebar-link">
                    <div class="nav-icon"><i class="fas fa-cogs"></i></div>
                    Paramètres
                </a>
                <a href="#help" class="sidebar-link">
                    <div class="nav-icon"><i class="fas fa-question-circle"></i></div>
                    Aide & Support
                </a>
                <a href="index.html" class="sidebar-link">
                    <div class="nav-icon"><i class="fas fa-sign-out-alt"></i></div>
                    Déconnexion
                </a>
            </nav>
        </div>
    </aside>
    
    <!-- Contenu Principal - Statistiques -->
    <main class="stats-main">
        <!-- Header avec sélecteur de période -->
        <div class="stats-header fade-in">
            <div class="stats-title-section">
                <h1><i class="fas fa-chart-line"></i> Mes Statistiques Avancées</h1>
                <div class="period-selector">
                    <button class="period-btn active" onclick="changePeriod('week')">7 jours</button>
                    <button class="period-btn" onclick="changePeriod('month')">30 jours</button>
                    <button class="period-btn" onclick="changePeriod('quarter')">3 mois</button>
                    <button class="period-btn" onclick="changePeriod('year')">1 an</button>
                    <button class="period-btn" onclick="changePeriod('all')">Tout</button>
                </div>
            </div>
            
            <!-- Cartes de Résumé -->
            <div class="summary-grid">
                <div class="summary-card lives">
                    <div class="summary-header">
                        <div class="summary-icon lives">
                            <i class="fas fa-heart"></i>
                        </div>
                        <div class="trend-badge up">
                            <i class="fas fa-arrow-up"></i>
                            12%
                        </div>
                    </div>
                    <div class="summary-value">36</div>
                    <div class="summary-label">Vies impactées</div>
                    <div class="summary-progress lives">
                        <div class="progress-fill" style="width: 85%"></div>
                    </div>
                    <div class="summary-meta">
                        <span>Objectif: 42 vies</span>
                        <span>85% atteint</span>
                    </div>
                </div>
                
                <div class="summary-card donations">
                    <div class="summary-header">
                        <div class="summary-icon donations">
                            <i class="fas fa-tint"></i>
                        </div>
                        <div class="trend-badge up">
                            <i class="fas fa-arrow-up"></i>
                            8%
                        </div>
                    </div>
                    <div class="summary-value">12</div>
                    <div class="summary-label">Dons réalisés</div>
                    <div class="summary-progress donations">
                        <div class="progress-fill" style="width: 60%"></div>
                    </div>
                    <div class="summary-meta">
                        <span>Objectif: 20 dons</span>
                        <span>En progression</span>
                    </div>
                </div>
                
                <div class="summary-card impact">
                    <div class="summary-header">
                        <div class="summary-icon impact">
                            <i class="fas fa-bolt"></i>
                        </div>
                        <div class="trend-badge up">
                            <i class="fas fa-arrow-up"></i>
                            25%
                        </div>
                    </div>
                    <div class="summary-value">98%</div>
                    <div class="summary-label">Taux de réponse</div>
                    <div class="summary-progress donations">
                        <div class="progress-fill" style="width: 98%"></div>
                    </div>
                    <div class="summary-meta">
                        <span>Top 5% national</span>
                        <span>Excellent</span>
                    </div>
                </div>
                
                <div class="summary-card response">
                    <div class="summary-header">
                        <div class="summary-icon response">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="trend-badge down">
                            <i class="fas fa-arrow-down"></i>
                            15%
                        </div>
                    </div>
                    <div class="summary-value">2.3h</div>
                    <div class="summary-label">Temps de réponse moyen</div>
                    <div class="summary-progress donations">
                        <div class="progress-fill" style="width: 70%"></div>
                    </div>
                    <div class="summary-meta">
                        <span>Moyenne: 4.5h</span>
                        <span>Très rapide</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Widgets de Performance -->
        <div class="performance-widgets fade-in">
            <div class="performance-widget">
                <div class="widget-header">
                    <div class="widget-icon efficiency">
                        <i class="fas fa-percentage"></i>
                    </div>
                    <div class="widget-title">Efficacité des dons</div>
                </div>
                <div class="widget-value">94.7%</div>
                <div class="widget-trend up">
                    <i class="fas fa-arrow-up"></i>
                    +3.2% vs dernier trimestre
                </div>
                <div class="mt-3">
                    <small class="text-muted" style="color: var(--neutral-graphite);">Dons réussis sur tentatives</small>
                </div>
            </div>
            
            <div class="performance-widget">
                <div class="widget-header">
                    <div class="widget-icon consistency">
                        <i class="fas fa-calendar-check"></i>
                    </div>
                    <div class="widget-title">Régularité</div>
                </div>
                <div class="widget-value">4.2</div>
                <div class="widget-trend up">
                    <i class="fas fa-arrow-up"></i>
                    +0.5 vs moyenne nationale
                </div>
                <div class="mt-3">
                    <small class="text-muted" style="color: var(--neutral-graphite);">Dons par an (moyenne)</small>
                </div>
            </div>
            
            <div class="performance-widget">
                <div class="widget-header">
                    <div class="widget-icon frequency">
                        <i class="fas fa-history"></i>
                    </div>
                    <div class="widget-title">Fréquence optimale</div>
                </div>
                <div class="widget-value">87%</div>
                <div class="widget-trend up">
                    <i class="fas fa-arrow-up"></i>
                    +12% vs objectif
                </div>
                <div class="mt-3">
                    <small class="text-muted" style="color: var(--neutral-graphite);">Dons dans la fenêtre optimale</small>
                </div>
            </div>
        </div>
        
        <!-- Section Graphiques Principaux -->
        <div class="charts-section fade-in">
            <div class="section-header">
                <h2><i class="fas fa-chart-bar"></i> Visualisations Avancées</h2>
                <div class="chart-controls">
                    <div class="chart-type-selector">
                        <button class="chart-type-btn active" onclick="changeChartType('line')">
                            <i class="fas fa-chart-line"></i>
                        </button>
                        <button class="chart-type-btn" onclick="changeChartType('bar')">
                            <i class="fas fa-chart-bar"></i>
                        </button>
                        <button class="chart-type-btn" onclick="changeChartType('area')">
                            <i class="fas fa-chart-area"></i>
                        </button>
                    </div>
                    <button class="btn btn-outline-primary btn-sm" onclick="exportCharts()">
                        <i class="fas fa-download"></i> Exporter
                    </button>
                </div>
            </div>
            
            <div class="charts-grid">
                <div class="chart-container">
                    <div class="chart-header">
                        <div class="chart-title">
                            <i class="fas fa-heartbeat"></i>
                            Évolution des dons
                        </div>
                        <div class="chart-actions">
                            <button class="chart-action-btn" title="Zoom avant" onclick="zoomChart('donations')">
                                <i class="fas fa-search-plus"></i>
                            </button>
                            <button class="chart-action-btn" title="Réinitialiser" onclick="resetChart('donations')">
                                <i class="fas fa-sync"></i>
                            </button>
                            <button class="chart-action-btn" title="Plein écran" onclick="fullscreenChart('donations')">
                                <i class="fas fa-expand"></i>
                            </button>
                        </div>
                    </div>
                    <canvas id="donationsChart"></canvas>
                </div>
                
                <div class="chart-container">
                    <div class="chart-header">
                        <div class="chart-title">
                            <i class="fas fa-users"></i>
                            Impact par type de bénéficiaire
                        </div>
                        <div class="chart-actions">
                            <button class="chart-action-btn" title="Changer vue" onclick="toggleChartView('impact')">
                                <i class="fas fa-exchange-alt"></i>
                            </button>
                            <button class="chart-action-btn" title="Exporter" onclick="exportChartData('impact')">
                                <i class="fas fa-file-export"></i>
                            </button>
                            <button class="chart-action-btn" title="Infos" onclick="showChartInfo('impact')">
                                <i class="fas fa-info-circle"></i>
                            </button>
                        </div>
                    </div>
                    <canvas id="impactChart"></canvas>
                </div>
            </div>
            
            <!-- Deuxième ligne de graphiques -->
            <div class="charts-grid">
                <div class="chart-container">
                    <div class="chart-header">
                        <div class="chart-title">
                            <i class="fas fa-map-marker-alt"></i>
                            Répartition géographique
                        </div>
                        <div class="chart-actions">
                            <button class="chart-action-btn" onclick="toggleHeatmap()">
                                <i class="fas fa-fire"></i>
                            </button>
                            <button class="chart-action-btn" onclick="showMapView()">
                                <i class="fas fa-map"></i>
                            </button>
                        </div>
                    </div>
                    <canvas id="locationChart"></canvas>
                </div>
                
                <div class="chart-container">
                    <div class="chart-header">
                        <div class="chart-title">
                            <i class="fas fa-bell"></i>
                            Performance aux urgences
                        </div>
                        <div class="chart-actions">
                            <button class="chart-action-btn" onclick="addBenchmark()">
                                <i class="fas fa-bullseye"></i>
                            </button>
                            <button class="chart-action-btn" onclick="showForecast()">
                                <i class="fas fa-crystal-ball"></i>
                            </button>
                        </div>
                    </div>
                    <canvas id="emergencyChart"></canvas>
                </div>
            </div>
        </div>
        
        <!-- Section Détails Avancés avec onglets -->
        <div class="details-section fade-in">
            <div class="details-tabs">
                <button class="details-tab active" onclick="showDetailTab('comparison')">
                    <i class="fas fa-balance-scale"></i> Comparaisons
                </button>
                <button class="details-tab" onclick="showDetailTab('goals')">
                    <i class="fas fa-bullseye"></i> Objectifs
                </button>
                <button class="details-tab" onclick="showDetailTab('analysis')">
                    <i class="fas fa-chart-pie"></i> Analyses
                </button>
                <button class="details-tab" onclick="showDetailTab('forecast')">
                    <i class="fas fa-crystal-ball"></i> Prévisions
                </button>
            </div>
            
            <!-- Onglet: Comparaisons -->
            <div id="detail-comparison" class="details-content active">
                <div class="comparison-grid">
                    <div class="comparison-card">
                        <div class="comparison-header" style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                            <div>
                                <div class="comparison-value" style="font-size: 2rem; font-weight: 700; color: var(--neutral-charcoal);">12</div>
                                <div class="comparison-label" style="font-size: 0.9rem; color: var(--neutral-graphite);">Vos dons (année)</div>
                            </div>
                            <div class="trend-badge up">
                                <i class="fas fa-arrow-up"></i>
                                +3 vs moyenne
                            </div>
                        </div>
                        
                        <div class="comparison-bar" style="height: 20px; background: var(--neutral-platinum); border-radius: 10px; margin: 20px 0; position: relative;">
                            <div class="comparison-you" style="position: absolute; height: 100%; background: var(--gradient-primary); border-radius: 10px; width: 80%;"></div>
                            <div class="comparison-average" style="position: absolute; height: 100%; background: var(--neutral-steel); border-radius: 10px; width: 60%; opacity: 0.5;"></div>
                        </div>
                        
                        <div class="comparison-legend" style="display: flex; gap: 24px; font-size: 0.85rem;">
                            <div class="legend-item" style="display: flex; align-items: center; gap: 8px;">
                                <div class="legend-color you" style="width: 12px; height: 12px; border-radius: 50%; background: var(--gradient-primary);"></div>
                                <span style="color: var(--neutral-charcoal);">Vous (12)</span>
                            </div>
                            <div class="legend-item" style="display: flex; align-items: center; gap: 8px;">
                                <div class="legend-color average" style="width: 12px; height: 12px; border-radius: 50%; background: var(--neutral-steel);"></div>
                                <span style="color: var(--neutral-charcoal);">Moyenne (9)</span>
                            </div>
                        </div>
                        
                        <div class="mt-3">
                            <small class="text-success">
                                <i class="fas fa-trophy"></i>
                                Vous êtes dans le top 15% des donneurs
                            </small>
                        </div>
                    </div>
                    
                    <div class="comparison-card">
                        <div class="comparison-header" style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                            <div>
                                <div class="comparison-value" style="font-size: 2rem; font-weight: 700; color: var(--neutral-charcoal);">2.3h</div>
                                <div class="comparison-label" style="font-size: 0.9rem; color: var(--neutral-graphite);">Temps de réponse</div>
                            </div>
                            <div class="trend-badge up">
                                <i class="fas fa-arrow-up"></i>
                                -2.2h vs moyenne
                            </div>
                        </div>
                        
                        <div class="comparison-bar" style="height: 20px; background: var(--neutral-platinum); border-radius: 10px; margin: 20px 0; position: relative;">
                            <div class="comparison-you" style="position: absolute; height: 100%; background: var(--gradient-primary); border-radius: 10px; width: 30%;"></div>
                            <div class="comparison-average" style="position: absolute; height: 100%; background: var(--neutral-steel); border-radius: 10px; width: 70%; opacity: 0.5;"></div>
                        </div>
                        
                        <div class="comparison-legend" style="display: flex; gap: 24px; font-size: 0.85rem;">
                            <div class="legend-item" style="display: flex; align-items: center; gap: 8px;">
                                <div class="legend-color you" style="width: 12px; height: 12px; border-radius: 50%; background: var(--gradient-primary);"></div>
                                <span style="color: var(--neutral-charcoal);">Vous (2.3h)</span>
                            </div>
                            <div class="legend-item" style="display: flex; align-items: center; gap: 8px;">
                                <div class="legend-color average" style="width: 12px; height: 12px; border-radius: 50%; background: var(--neutral-steel);"></div>
                                <span style="color: var(--neutral-charcoal);">Moyenne (4.5h)</span>
                            </div>
                        </div>
                        
                        <div class="mt-3">
                            <small class="text-success">
                                <i class="fas fa-bolt"></i>
                                Réponse 48% plus rapide que la moyenne
                            </small>
                        </div>
                    </div>
                </div>
                
                <div class="mt-4">
                    <h5 style="color: var(--primary-blue-dark);"><i class="fas fa-trophy"></i> Classement et Palmarès</h5>
                    <div class="stats-table-container mt-3">
                        <table class="stats-table">
                            <thead>
                                <tr>
                                    <th>Position</th>
                                    <th>Métrique</th>
                                    <th>Votre score</th>
                                    <th>Moyenne</th>
                                    <th>Top 10%</th>
                                    <th>Rang</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>1</td>
                                    <td>Dons par an</td>
                                    <td><strong>4.0</strong></td>
                                    <td>2.5</td>
                                    <td>5.0</td>
                                    <td><span class="badge bg-warning">Top 15%</span></td>
                                </tr>
                                <tr>
                                    <td>2</td>
                                    <td>Taux de réponse</td>
                                    <td><strong>98%</strong></td>
                                    <td>85%</td>
                                    <td>95%</td>
                                    <td><span class="badge bg-success">Top 5%</span></td>
                                </tr>
                                <tr>
                                    <td>3</td>
                                    <td>Vies impactées</td>
                                    <td><strong>36</strong></td>
                                    <td>18</td>
                                    <td>40</td>
                                    <td><span class="badge bg-info">Top 20%</span></td>
                                </tr>
                                <tr>
                                    <td>4</td>
                                    <td>Urgences répondues</td>
                                    <td><strong>8</strong></td>
                                    <td>3</td>
                                    <td>10</td>
                                    <td><span class="badge bg-primary">Top 25%</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <!-- Onglet: Objectifs -->
            <div id="detail-goals" class="details-content">
                <div class="goals-grid" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px;">
                    <div class="goal-card" style="background: var(--neutral-white); border-radius: 12px; padding: 24px; border: 1px solid var(--neutral-platinum); position: relative; overflow: hidden;">
                        <div class="goal-header" style="display: flex; align-items: center; gap: 12px; margin-bottom: 20px;">
                            <div class="goal-icon" style="width: 40px; height: 40px; border-radius: 10px; background: var(--gradient-primary); display: flex; align-items: center; justify-content: center; color: white; font-size: 1.2rem;">
                                <i class="fas fa-heart"></i>
                            </div>
                            <div class="goal-title" style="flex: 1; font-weight: 600; color: var(--neutral-charcoal);">
                                50 vies sauvées
                            </div>
                            <div class="goal-progress" style="font-size: 0.9rem; color: var(--neutral-graphite);">
                                72%
                            </div>
                        </div>
                        <div class="goal-bar" style="height: 8px; background: var(--neutral-platinum); border-radius: 4px; overflow: hidden; margin: 16px 0;">
                            <div class="goal-fill" style="height: 100%; background: var(--gradient-primary); border-radius: 4px; width: 72%;"></div>
                        </div>
                        <div class="goal-stats" style="display: flex; justify-content: space-between; font-size: 0.85rem; color: var(--neutral-graphite);">
                            <span>36/50 atteints</span>
                            <span>14 restants</span>
                        </div>
                        <div class="mt-3">
                            <small style="color: var(--neutral-graphite);">
                                <i class="fas fa-calendar"></i>
                                Objectif atteignable dans 8 mois
                            </small>
                        </div>
                    </div>
                    
                    <div class="goal-card" style="background: var(--neutral-white); border-radius: 12px; padding: 24px; border: 1px solid var(--neutral-platinum); position: relative; overflow: hidden;">
                        <div class="goal-header" style="display: flex; align-items: center; gap: 12px; margin-bottom: 20px;">
                            <div class="goal-icon" style="width: 40px; height: 40px; border-radius: 10px; background: var(--gradient-primary); display: flex; align-items: center; justify-content: center; color: white; font-size: 1.2rem;">
                                <i class="fas fa-trophy"></i>
                            </div>
                            <div class="goal-title" style="flex: 1; font-weight: 600; color: var(--neutral-charcoal);">
                                Niveau Platine
                            </div>
                            <div class="goal-progress" style="font-size: 0.9rem; color: var(--neutral-graphite);">
                                60%
                            </div>
                        </div>
                        <div class="goal-bar" style="height: 8px; background: var(--neutral-platinum); border-radius: 4px; overflow: hidden; margin: 16px 0;">
                            <div class="goal-fill" style="height: 100%; background: var(--gradient-primary); border-radius: 4px; width: 60%;"></div>
                        </div>
                        <div class="goal-stats" style="display: flex; justify-content: space-between; font-size: 0.85rem; color: var(--neutral-graphite);">
                            <span>12/20 dons</span>
                            <span>8 restants</span>
                        </div>
                        <div class="mt-3">
                            <small style="color: var(--neutral-graphite);">
                                <i class="fas fa-clock"></i>
                                Prochain niveau dans 16 mois
                            </small>
                        </div>
                    </div>
                    
                    <div class="goal-card" style="background: var(--neutral-white); border-radius: 12px; padding: 24px; border: 1px solid var(--neutral-platinum); position: relative; overflow: hidden;">
                        <div class="goal-header" style="display: flex; align-items: center; gap: 12px; margin-bottom: 20px;">
                            <div class="goal-icon" style="width: 40px; height: 40px; border-radius: 10px; background: var(--gradient-primary); display: flex; align-items: center; justify-content: center; color: white; font-size: 1.2rem;">
                                <i class="fas fa-bolt"></i>
                            </div>
                            <div class="goal-title" style="flex: 1; font-weight: 600; color: var(--neutral-charcoal);">
                                Expert en urgences
                            </div>
                            <div class="goal-progress" style="font-size: 0.9rem; color: var(--neutral-graphite);">
                                80%
                            </div>
                        </div>
                        <div class="goal-bar" style="height: 8px; background: var(--neutral-platinum); border-radius: 4px; overflow: hidden; margin: 16px 0;">
                            <div class="goal-fill" style="height: 100%; background: var(--gradient-primary); border-radius: 4px; width: 80%;"></div>
                        </div>
                        <div class="goal-stats" style="display: flex; justify-content: space-between; font-size: 0.85rem; color: var(--neutral-graphite);">
                            <span>8/10 urgences</span>
                            <span>2 restantes</span>
                        </div>
                        <div class="mt-3">
                            <small style="color: var(--neutral-graphite);">
                                <i class="fas fa-star"></i>
                                Badge spécial à débloquer
                            </small>
                        </div>
                    </div>
                </div>
                
                <div class="mt-4">
                    <h5 style="color: var(--primary-blue-dark);"><i class="fas fa-chart-line"></i> Progression vers les objectifs</h5>
                    <div class="chart-container" style="height: 300px; margin-top: 20px;">
                        <canvas id="goalsChart"></canvas>
                    </div>
                </div>
            </div>
            
            <!-- Onglet: Analyses -->
            <div id="detail-analysis" class="details-content">
                <div class="stats-table-container">
                    <table class="stats-table">
                        <thead>
                            <tr>
                                <th>Période</th>
                                <th>Dons</th>
                                <th>Vies impactées</th>
                                <th>Temps moyen</th>
                                <th>Efficacité</th>
                                <th>Tendance</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>2024 (YTD)</strong></td>
                                <td>3</td>
                                <td>9</td>
                                <td>2.1h</td>
                                <td>96%</td>
                                <td>
                                    <div class="trend-badge up">
                                        <i class="fas fa-arrow-up"></i>
                                        +15%
                                    </div>
                                </td>
                                <td>
                                    <button class="btn btn-sm btn-outline-primary" onclick="analyzePeriod('2024')">
                                        <i class="fas fa-search"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td><strong>2023</strong></td>
                                <td>4</td>
                                <td>12</td>
                                <td>2.4h</td>
                                <td>94%</td>
                                <td>
                                    <div class="trend-badge up">
                                        <i class="fas fa-arrow-up"></i>
                                        +8%
                                    </div>
                                </td>
                                <td>
                                    <button class="btn btn-sm btn-outline-primary" onclick="analyzePeriod('2023')">
                                        <i class="fas fa-search"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td><strong>2022</strong></td>
                                <td>3</td>
                                <td>9</td>
                                <td>2.8h</td>
                                <td>92%</td>
                                <td>
                                    <div class="trend-badge up">
                                        <i class="fas fa-arrow-up"></i>
                                        +5%
                                    </div>
                                </td>
                                <td>
                                    <button class="btn btn-sm btn-outline-primary" onclick="analyzePeriod('2022')">
                                        <i class="fas fa-search"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="mt-4">
                    <h5 style="color: var(--primary-blue-dark);"><i class="fas fa-lightbulb"></i> Insights et Recommandations</h5>
                    <div class="alert alert-success mt-3">
                        <i class="fas fa-chart-line"></i>
                        <strong>Excellente progression !</strong>
                        <p class="mb-0">Votre taux de réponse s'est amélioré de 28% depuis 2021. Continuez ainsi !</p>
                    </div>
                    
                    <div class="alert alert-info mt-3">
                        <i class="fas fa-bullseye"></i>
                        <strong>Opportunité d'amélioration</strong>
                        <p class="mb-0">Essayer les dons de plasma pourrait augmenter votre impact de 30%.</p>
                    </div>
                </div>
            </div>
            
            <!-- Onglet: Prévisions -->
            <div id="detail-forecast" class="details-content">
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <div class="comparison-card">
                            <div class="comparison-header" style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                                <div>
                                    <div class="comparison-value" style="font-size: 2rem; font-weight: 700; color: var(--neutral-charcoal);">18</div>
                                    <div class="comparison-label" style="font-size: 0.9rem; color: var(--neutral-graphite);">Dons prévus (12 mois)</div>
                                </div>
                                <div class="trend-badge up">
                                    <i class="fas fa-arrow-up"></i>
                                    +50%
                                </div>
                            </div>
                            <div class="mt-3">
                                <small style="color: var(--neutral-graphite);">
                                    <i class="fas fa-chart-line"></i>
                                    Basé sur votre historique et fréquence actuelle
                                </small>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-6 mb-3">
                        <div class="comparison-card">
                            <div class="comparison-header" style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                                <div>
                                    <div class="comparison-value" style="font-size: 2rem; font-weight: 700; color: var(--neutral-charcoal);">54</div>
                                    <div class="comparison-label" style="font-size: 0.9rem; color: var(--neutral-graphite);">Vies impactées (prévision)</div>
                                </div>
                                <div class="trend-badge up">
                                    <i class="fas fa-arrow-up"></i>
                                    +50%
                                </div>
                            </div>
                            <div class="mt-3">
                                <small style="color: var(--neutral-graphite);">
                                    <i class="fas fa-heart"></i>
                                    Estimation basée sur votre impact moyen par don
                                </small>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="mt-4">
                    <h5 style="color: var(--primary-blue-dark);"><i class="fas fa-calendar-alt"></i> Calendrier de projection</h5>
                    <div class="chart-container" style="height: 350px; margin-top: 20px;">
                        <canvas id="forecastChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Section Export et Partage -->
        <div class="export-section fade-in">
            <h5 style="color: var(--primary-blue-dark);"><i class="fas fa-share-alt"></i> Exporter et Partager vos Statistiques</h5>
            <div class="export-options mt-3">
                <button class="export-btn" onclick="exportReport('pdf')">
                    <i class="fas fa-file-pdf"></i>
                    PDF Complet
                </button>
                <button class="export-btn" onclick="exportReport('excel')">
                    <i class="fas fa-file-excel"></i>
                    Données Excel
                </button>
                <button class="export-btn" onclick="exportReport('image')">
                    <i class="fas fa-image"></i>
                    Images des graphiques
                </button>
                <button class="export-btn" onclick="shareStatistics()">
                    <i class="fas fa-share"></i>
                    Partager sur les réseaux
                </button>
                <button class="export-btn" onclick="printStatistics()">
                    <i class="fas fa-print"></i>
                    Imprimer le rapport
                </button>
                <button class="export-btn" onclick="scheduleReport()">
                    <i class="fas fa-calendar"></i>
                    Rapport automatique
                </button>
            </div>
            
            <div class="mt-4">
                <h6 style="color: var(--primary-blue-dark);"><i class="fas fa-cog"></i> Personnaliser l'affichage</h6>
                <div class="row mt-3">
                    <div class="col-md-4 mb-2">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="showTrends" checked>
                            <label class="form-check-label" for="showTrends" style="color: var(--neutral-charcoal);">
                                Afficher les tendances
                            </label>
                        </div>
                    </div>
                    <div class="col-md-4 mb-2">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="showComparisons" checked>
                            <label class="form-check-label" for="showComparisons" style="color: var(--neutral-charcoal);">
                                Afficher les comparaisons
                            </label>
                        </div>
                    </div>
                    <div class="col-md-4 mb-2">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="showForecasts" checked>
                            <label class="form-check-label" for="showForecasts" style="color: var(--neutral-charcoal);">
                                Afficher les prévisions
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
    
    <script>
        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            // Initialiser AOS
            AOS.init({
                duration: 800,
                once: true,
                offset: 100
            });
            
            // Gestion du menu mobile
            const mobileMenuBtn = document.getElementById('mobileMenuBtn');
            const donorSidebar = document.getElementById('donorSidebar');
            const sidebarOverlay = document.getElementById('sidebarOverlay');
            
            if (mobileMenuBtn) {
                mobileMenuBtn.addEventListener('click', function() {
                    donorSidebar.classList.toggle('active');
                    sidebarOverlay.classList.toggle('active');
                });
            }
            
            if (sidebarOverlay) {
                sidebarOverlay.addEventListener('click', function() {
                    donorSidebar.classList.remove('active');
                    sidebarOverlay.classList.remove('active');
                });
            }
            
            // Initialiser les graphiques
            initCharts();
            
            // Adapter les graphiques à la taille d'écran
            window.addEventListener('resize', handleResize);
            
            // Charger les données
            loadStatisticsData();
        });
        
        // Variables globales pour les graphiques
        let charts = {};
        let currentPeriod = 'year';
        let currentChartType = 'line';
        
        // Initialiser tous les graphiques
        function initCharts() {
            // Graphique des dons
            const donationsCtx = document.getElementById('donationsChart')?.getContext('2d');
            if (donationsCtx) {
                charts.donations = new Chart(donationsCtx, {
                    type: 'line',
                    data: {
                        labels: ['Jan', 'Fév', 'Mar', 'Avr', 'Mai', 'Jun', 'Jul', 'Aoû', 'Sep', 'Oct', 'Nov', 'Déc'],
                        datasets: [{
                            label: 'Dons réalisés',
                            data: [1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0],
                            borderColor: '#1a73e8',
                            backgroundColor: 'rgba(26, 115, 232, 0.1)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.4
                        }, {
                            label: 'Objectif mensuel',
                            data: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
                            borderColor: '#4CAF50',
                            borderDash: [5, 5],
                            borderWidth: 2,
                            fill: false
                        }]
                    },
                    options: getChartOptions('Évolution des dons mensuels')
                });
            }
            
            // Graphique d'impact
            const impactCtx = document.getElementById('impactChart')?.getContext('2d');
            if (impactCtx) {
                charts.impact = new Chart(impactCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Urgences', 'Chirurgies', 'Traitements', 'Recherche'],
                        datasets: [{
                            data: [35, 25, 20, 20],
                            backgroundColor: [
                                '#FF5252',
                                '#1a73e8',
                                '#4CAF50',
                                '#FF9800'
                            ],
                            borderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: window.innerWidth < 768 ? 'bottom' : 'right',
                                labels: {
                                    boxWidth: 12,
                                    padding: 20
                                }
                            }
                        }
                    }
                });
            }
            
            // Graphique de localisation
            const locationCtx = document.getElementById('locationChart')?.getContext('2d');
            if (locationCtx) {
                charts.location = new Chart(locationCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Hôpital A', 'Hôpital B', 'Clinique C', 'Centre D', 'Mobile E'],
                        datasets: [{
                            label: 'Nombre de dons',
                            data: [5, 3, 2, 1, 1],
                            backgroundColor: '#1a73e8',
                            borderColor: '#0d47a1',
                            borderWidth: 1
                        }]
                    },
                    options: getChartOptions('Dons par centre')
                });
            }
            
            // Graphique des urgences
            const emergencyCtx = document.getElementById('emergencyChart')?.getContext('2d');
            if (emergencyCtx) {
                charts.emergency = new Chart(emergencyCtx, {
                    type: 'line',
                    data: {
                        labels: ['Jan', 'Fév', 'Mar', 'Avr', 'Mai', 'Jun'],
                        datasets: [{
                            label: 'Temps de réponse (h)',
                            data: [3.2, 2.8, 2.4, 2.1, 1.9, 1.8],
                            borderColor: '#FF9800',
                            backgroundColor: 'rgba(255, 152, 0, 0.1)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.4
                        }]
                    },
                    options: getChartOptions('Amélioration du temps de réponse')
                });
            }
            
            // Graphique des objectifs
            const goalsCtx = document.getElementById('goalsChart')?.getContext('2d');
            if (goalsCtx) {
                charts.goals = new Chart(goalsCtx, {
                    type: 'radar',
                    data: {
                        labels: ['Vies sauvées', 'Dons', 'Urgences', 'Régularité', 'Impact'],
                        datasets: [{
                            label: 'Actuel',
                            data: [72, 60, 80, 85, 75],
                            backgroundColor: 'rgba(26, 115, 232, 0.2)',
                            borderColor: '#1a73e8',
                            borderWidth: 2
                        }, {
                            label: 'Objectif',
                            data: [100, 100, 100, 100, 100],
                            backgroundColor: 'rgba(76, 175, 80, 0.2)',
                            borderColor: '#4CAF50',
                            borderWidth: 2,
                            borderDash: [5, 5]
                        }]
                },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            r: {
                                beginAtZero: true,
                                max: 100
                            }
                        }
                    }
                });
            }
            
            // Graphique de prévision
            const forecastCtx = document.getElementById('forecastChart')?.getContext('2d');
            if (forecastCtx) {
                charts.forecast = new Chart(forecastCtx, {
                    type: 'line',
                    data: {
                        labels: ['Jan', 'Fév', 'Mar', 'Avr', 'Mai', 'Jun', 'Jul', 'Aoû', 'Sep', 'Oct', 'Nov', 'Déc'],
                        datasets: [{
                            label: 'Historique',
                            data: [1, 0, 1, null, null, null, null, null, null, null, null, null],
                            borderColor: '#1a73e8',
                            borderWidth: 3,
                            fill: false
                        }, {
                            label: 'Prévision',
                            data: [null, null, 1, 1, 0, 1, 0, 1, 1, 0, 1, 0],
                            borderColor: '#4CAF50',
                            borderWidth: 3,
                            borderDash: [5, 5],
                            fill: false
                        }, {
                            label: 'Objectif',
                            data: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
                            borderColor: '#FF9800',
                            borderWidth: 2,
                            borderDash: [2, 2],
                            fill: false
                        }]
                    },
                    options: getChartOptions('Prévision des dons 2024')
                });
            }
        }
        
        // Options communes pour les graphiques
        function getChartOptions(title) {
            const isMobile = window.innerWidth < 768;
            
            return {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: isMobile ? 'bottom' : 'top',
                        labels: {
                            boxWidth: 12,
                            padding: isMobile ? 10 : 20,
                            font: {
                                size: isMobile ? 10 : 12
                            }
                        }
                    },
                    title: {
                        display: false
                    },
                    tooltip: {
                        mode: 'index',
                        intersect: false,
                        titleFont: {
                            size: isMobile ? 11 : 12
                        },
                        bodyFont: {
                            size: isMobile ? 10 : 11
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: {
                            color: 'rgba(0, 0, 0, 0.05)'
                        },
                        ticks: {
                            font: {
                                size: isMobile ? 10 : 11
                            }
                        }
                    },
                    x: {
                        grid: {
                            color: 'rgba(0, 0, 0, 0.05)'
                        },
                        ticks: {
                            font: {
                                size: isMobile ? 10 : 11
                            }
                        }
                    }
                }
            };
        }
        
        // Gérer le redimensionnement
        function handleResize() {
            // Réinitialiser les graphiques avec la nouvelle taille
            Object.keys(charts).forEach(key => {
                if (charts[key]) {
                    charts[key].destroy();
                }
            });
            
            initCharts();
            
            // Ajuster la position de la légende pour les mobiles
            if (charts.impact) {
                charts.impact.options.plugins.legend.position = window.innerWidth < 768 ? 'bottom' : 'right';
                charts.impact.update();
            }
        }
        
        // Charger les données statistiques
        function loadStatisticsData() {
            // Simuler le chargement des données
            setTimeout(() => {
                showNotification('Données statistiques mises à jour', 'success');
            }, 1000);
        }
        
        // Changer la période d'analyse
        function changePeriod(period) {
            currentPeriod = period;
            
            // Mettre à jour les boutons actifs
            document.querySelectorAll('.period-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Mettre à jour les données des graphiques
            updateChartsForPeriod(period);
            
            // Afficher une notification
            showNotification(`Période changée: ${getPeriodName(period)}`, 'info');
        }
        
        // Obtenir le nom de la période
        function getPeriodName(period) {
            const names = {
                'week': '7 derniers jours',
                'month': '30 derniers jours',
                'quarter': '3 derniers mois',
                'year': '12 derniers mois',
                'all': 'Toute la période'
            };
            return names[period] || period;
        }
        
        // Mettre à jour les graphiques pour la période
        function updateChartsForPeriod(period) {
            // Simuler le changement de données
            const periods = {
                'week': [1, 2, 1, 0, 1, 0, 1],
                'month': [1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0],
                'quarter': [1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0],
                'year': [1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0],
                'all': [1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0]
            };
            
            if (charts.donations) {
                charts.donations.data.datasets[0].data = periods[period] || periods.year;
                charts.donations.update();
            }
        }
        
        // Changer le type de graphique
        function changeChartType(type) {
            currentChartType = type;
            
            // Mettre à jour les boutons actifs
            document.querySelectorAll('.chart-type-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Changer le type des graphiques linéaires
            Object.keys(charts).forEach(key => {
                if (charts[key] && (charts[key].config.type === 'line' || charts[key].config.type === 'bar' || charts[key].config.type === 'line')) {
                    charts[key].config.type = type;
                    charts[key].update();
                }
            });
        }
        
        // Afficher l'onglet de détails
        function showDetailTab(tabName) {
            // Désactiver tous les onglets
            document.querySelectorAll('.details-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.querySelectorAll('.details-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Activer l'onglet sélectionné
            event.target.classList.add('active');
            const targetElement = document.getElementById(`detail-${tabName}`);
            if (targetElement) {
                targetElement.classList.add('active');
            }
        }
        
        // Analyser une période spécifique
        function analyzePeriod(period) {
            showNotification(`Analyse de la période ${period} en cours...`, 'info');
            
            // Simuler l'analyse
            setTimeout(() => {
                showNotification(`Analyse ${period} complétée`, 'success');
            }, 1500);
        }
        
        // Fonctions des boutons des graphiques
        function zoomChart(chartId) {
            showNotification('Zoom activé sur le graphique', 'info');
        }
        
        function resetChart(chartId) {
            if (charts[chartId]) {
                charts[chartId].reset();
                showNotification('Graphique réinitialisé', 'info');
            }
        }
        
        function fullscreenChart(chartId) {
            const canvas = document.getElementById(`${chartId}Chart`);
            if (canvas) {
                if (canvas.requestFullscreen) {
                    canvas.requestFullscreen();
                } else if (canvas.webkitRequestFullscreen) {
                    canvas.webkitRequestFullscreen();
                }
            }
        }
        
        function toggleChartView(chartId) {
            if (charts[chartId]) {
                const currentType = charts[chartId].config.type;
                const newType = currentType === 'doughnut' ? 'pie' : 'doughnut';
                charts[chartId].config.type = newType;
                charts[chartId].update();
                showNotification(`Vue changée: ${newType}`, 'info');
            }
        }
        
        function exportChartData(chartId) {
            showNotification(`Export des données ${chartId}...`, 'info');
        }
        
        function showChartInfo(chartId) {
            const info = {
                'donations': 'Évolution de vos dons au fil du temps',
                'impact': 'Répartition de votre impact par type de bénéficiaire',
                'location': 'Distribution géographique de vos dons',
                'emergency': 'Performance et amélioration de vos temps de réponse'
            };
            
            alert(info[chartId] || 'Informations du graphique');
        }
        
        function toggleHeatmap() {
            showNotification('Carte de chaleur activée', 'info');
        }
        
        function showMapView() {
            showNotification('Vue carte activée', 'info');
        }
        
        function addBenchmark() {
            showNotification('Benchmark ajouté', 'success');
        }
        
        function showForecast() {
            showNotification('Prévisions générées', 'info');
        }
        
        // Exporter un rapport
        function exportReport(format) {
            const formats = {
                'pdf': 'PDF',
                'excel': 'Excel',
                'image': 'Images'
            };
            
            showNotification(`Génération du rapport ${formats[format]}...`, 'info');
            
            setTimeout(() => {
                showNotification(`Rapport ${formats[format]} généré avec succès !`, 'success');
            }, 2000);
        }
        
        // Partager les statistiques
        function shareStatistics() {
            if (navigator.share) {
                navigator.share({
                    title: 'Mes Statistiques BloodLink',
                    text: 'Découvrez mes statistiques de don de sang ! 12 dons, 36 vies impactées, 98% de taux de réponse.',
                    url: window.location.href
                });
            } else {
                showNotification('Copiez le lien pour partager', 'info');
                navigator.clipboard.writeText(window.location.href).then(() => {
                    showNotification('Lien copié dans le presse-papier !', 'success');
                });
            }
        }
        
        // Imprimer les statistiques
        function printStatistics() {
            showNotification('Préparation de l\'impression...', 'info');
            setTimeout(() => {
                window.print();
            }, 500);
        }
        
        // Planifier un rapport automatique
        function scheduleReport() {
            showNotification('Rapport automatique planifié', 'success');
        }
        
        // Afficher une notification
        function showNotification(message, type = 'info') {
            // Créer l'élément de notification
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                right: 20px;
                background: ${type === 'success' ? '#4CAF50' : type === 'error' ? '#f44336' : '#2196F3'};
                color: white;
                padding: 16px 24px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                z-index: 1100;
                animation: slideInRight 0.3s ease;
                display: flex;
                align-items: center;
                gap: 12px;
                max-width: 400px;
            `;
            
            notification.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
                <span>${message}</span>
            `;
            
            document.body.appendChild(notification);
            
            // Supprimer après 5 secondes
            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.3s ease';
                setTimeout(() => {
                    notification.remove();
                }, 300);
            }, 5000);
            
            // Ajouter les animations CSS si nécessaire
            if (!document.querySelector('#notification-styles')) {
                const style = document.createElement('style');
                style.id = 'notification-styles';
                style.textContent = `
                    @keyframes slideInRight {
                        from { transform: translateX(100%); opacity: 0; }
                        to { transform: translateX(0); opacity: 1; }
                    }
                    @keyframes slideOutRight {
                        from { transform: translateX(0); opacity: 1; }
                        to { transform: translateX(100%); opacity: 0; }
                    }
                `;
                document.head.appendChild(style);
            }
        }
        
        // Styles d'impression
        const printStyles = document.createElement('style');
        printStyles.textContent = `
            @media print {
                .donor-header,
                .donor-sidebar,
                .chart-actions,
                .chart-controls,
                .details-tabs,
                .export-section,
                .notification,
                .mobile-menu-btn,
                .period-selector,
                .btn {
                    display: none !important;
                }
                
                .stats-main {
                    margin: 0 !important;
                    padding: 20px !important;
                }
                
                .stats-header,
                .charts-section,
                .details-section {
                    box-shadow: none !important;
                    border: 1px solid #ddd !important;
                    page-break-inside: avoid;
                }
                
                .chart-container {
                    height: 300px !important;
                }
                
                body {
                    background: white !important;
                }
                
                .summary-grid {
                    page-break-inside: avoid;
                }
                
                .performance-widgets {
                    page-break-inside: avoid;
                }
            }
        `;
        document.head.appendChild(printStyles);
    </script>
</body>
</html>